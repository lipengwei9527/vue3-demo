{"version":3,"file":"directives.Cgawyxuo.js","sources":["../../src/directives/sizeOb/index.ts","../../src/directives/testDir/index.ts","../../src/directives/index.ts"],"sourcesContent":["/*\r\n * @Date: 2024-04-19\r\n * @Author: lipengwei\r\n * @LastEditors: lipengwei\r\n * @Description: 当绑定的元素尺寸发生变化时触发handler事件返回元素的宽和高(包括边框)\r\n */\r\n\r\nimport { DirectiveBinding } from \"vue\";\r\n\r\nconst map = new WeakMap<Element, Rect>();\r\n\r\n// ResizeObserver:监听一个元素的尺寸变化\r\nconst ob = new ResizeObserver((entries) => {\r\n  for (const entry of entries) {\r\n    const handler = map.get(entry.target) as Rect;\r\n    // console.log(\"尺寸发生变化\", entry, handler);\r\n    if (handler) {\r\n      const { inlineSize, blockSize } = entry.borderBoxSize[0];\r\n      handler({\r\n        width: inlineSize, //元素的宽度(包括边框)\r\n        height: blockSize, //元素的高度(包括边框)\r\n      });\r\n    }\r\n  }\r\n});\r\nexport default {\r\n  mounted(el: HTMLElement, binding: DirectiveBinding<Rect>) {\r\n    // 监事尺寸变化\r\n    ob.observe(el);\r\n    map.set(el, binding.value);\r\n  },\r\n  unmounted(el: HTMLElement) {\r\n    // 取消监听\r\n    ob.unobserve(el);\r\n  },\r\n};\r\n","import { DirectiveBinding } from \"vue\";\r\n\r\nexport default {\r\n  mounted(el: HTMLElement, bind: DirectiveBinding) {\r\n    el;\r\n    bind;\r\n    // console.log(`output->el,bind`, el, bind);\r\n  },\r\n};\r\n","import { App } from \"vue\";\r\nexport function setGlobalDirectives(app: App<Element>) {\r\n  const modules: Record<string, object> = import.meta.glob(\"./*/index.ts\", {\r\n    import: \"default\",\r\n    eager: true,\r\n  });\r\n  Object.keys(modules).map((key) => {\r\n    const dirKey = key.split(\"/\")[1];\r\n    app.directive(dirKey, modules[key]);\r\n  });\r\n}\r\n"],"names":["map","ob","entries","entry","handler","inlineSize","blockSize","__vite_glob_0_0","el","binding","__vite_glob_0_1","bind","setGlobalDirectives","app","modules","key","dirKey"],"mappings":"AASA,MAAMA,MAAU,QAGVC,EAAK,IAAI,eAAgBC,GAAY,CACzC,UAAWC,KAASD,EAAS,CAC3B,MAAME,EAAUJ,EAAI,IAAIG,EAAM,MAAM,EAEpC,GAAIC,EAAS,CACX,KAAM,CAAE,WAAAC,EAAY,UAAAC,CAAA,EAAcH,EAAM,cAAc,CAAC,EAC/CC,EAAA,CACN,MAAOC,EACP,OAAQC,CAAA,CACT,CACH,CACF,CACF,CAAC,EACcC,EAAA,CACb,QAAQC,EAAiBC,EAAiC,CAExDR,EAAG,QAAQO,CAAE,EACTR,EAAA,IAAIQ,EAAIC,EAAQ,KAAK,CAC3B,EACA,UAAUD,EAAiB,CAEzBP,EAAG,UAAUO,CAAE,CACjB,CACF,ECjCeE,EAAA,CACb,QAAQF,EAAiBG,EAAwB,CAIjD,CACF,ECPO,SAASC,EAAoBC,EAAmB,CAC/C,MAAAC,EAAkC,OAAA,OAAA,CAAA,oBAAAP,EAAA,qBAAAG,CAAA,CAAA,EAIxC,OAAO,KAAKI,CAAO,EAAE,IAAKC,GAAQ,CAChC,MAAMC,EAASD,EAAI,MAAM,GAAG,EAAE,CAAC,EAC/BF,EAAI,UAAUG,EAAQF,EAAQC,CAAG,CAAC,CAAA,CACnC,CACH"}