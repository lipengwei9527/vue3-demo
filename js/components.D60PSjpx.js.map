{"version":3,"file":"components.D60PSjpx.js","sources":["../../src/components/ExContextMenu/index.vue","../../src/components/ExCreateForm/index.vue","../../src/components/ExForm/components/ExButtonGroup/index.vue","../../src/components/ExForm/components/ExInput/index.vue","../../src/components/ExForm/components/ExSelect/index.vue","../../src/components/ExForm/config.ts","../../src/components/ExForm/index.vue","../../src/components/ExMenu/components/ExSubMenu.vue","../../src/components/ExMenu/index.vue","../../src/components/ExTable/tableConfig.ts","../../src/components/ExTable/index.vue","../../src/components/index.ts"],"sourcesContent":["<script lang=\"ts\">\nimport { defineComponent } from 'vue'\nexport default defineComponent({\n  name: 'ExContextMenu',\n})\n</script>\n<template>\r\n  <div ref=\"containerRef\" class=\"ex-context-menu\">\r\n    <slot></slot>\r\n    <Teleport to=\"body\">\r\n      <Transition\r\n        @before-enter=\"handleBeforeEnter\"\r\n        @enter=\"handleEnter\"\r\n        @after-enter=\"handleAfterEnter\"\r\n      >\r\n        <div>\r\n          <div\r\n            v-size-ob=\"handleSizeChange\"\r\n            class=\"menu-list\"\r\n            v-if=\"showMenu\"\r\n            :style=\"{\r\n              left: pos.posX + 'px',\r\n              top: pos.posY + 'px',\r\n            }\"\r\n          >\r\n            <div\r\n              class=\"menu-item\"\r\n              @click=\"handleMenuItem(item)\"\r\n              v-for=\"item in menu\"\r\n            >\r\n              {{ item.label }}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Transition>\r\n    </Teleport>\r\n  </div>\r\n</template>\r\n\r\n<script setup name=\"ExContextMenu\" lang=\"ts\">\r\n/**\r\n * 鼠标左键菜单组件\r\n * @param menu 参列表\r\n * @event select(item) 返回menu的item\r\n */\r\nimport { ref, computed, PropType } from \"vue\";\r\nimport useContextMenu from \"@/hooks/useContextMenu\";\r\nimport useViewPort from \"@/hooks/useViewPort\";\r\ndefineProps({\r\n  menu: {\r\n    type: Array as PropType<{ label: string }[]>,\r\n    default: () => [],\r\n  },\r\n});\r\n// 视口的宽和高\r\nconst { vw, vh } = useViewPort();\r\nconst containerRef = ref();\r\n// x-鼠标点击位置距离视口左边的距离,y-鼠标点击位置距离视口顶部的距离,showMenu-是否显示菜单\r\nconst { x, y, showMenu } = useContextMenu(containerRef);\r\nconst emit = defineEmits([\"select\"]);\r\n\r\n// 菜单的宽和高\r\nconst w = ref(0);\r\nconst h = ref(0);\r\nfunction handleSizeChange(rect: Parameters<Rect>[0]) {\r\n  const { width, height } = rect;\r\n  w.value = width;\r\n  h.value = height;\r\n}\r\n// 菜单最终显示位置\r\nconst pos = computed(() => {\r\n  // posX,posY-菜单最终显示的x,y坐标\r\n  let posX = x.value;\r\n  let posY = y.value;\r\n  // 视口宽度-鼠标位置>菜单宽度:菜单需要显示在鼠标左边\r\n  if (posX > vw.value - w.value) {\r\n    posX -= w.value;\r\n  }\r\n  // 视口高度-鼠标位置<菜单高度:菜单需要往上移\r\n  if (vh.value - posY < h.value) {\r\n    posY = vh.value - h.value;\r\n  }\r\n  return {\r\n    posX,\r\n    posY,\r\n  };\r\n});\r\n\r\n// 点击菜单item\r\nfunction handleMenuItem<T>(item: T) {\r\n  showMenu.value = false;\r\n  emit(\"select\", item);\r\n}\r\n// 元素加入到页面之前\r\nfunction handleBeforeEnter(el: Element) {\r\n  if (!(el instanceof HTMLElement)) return;\r\n  el.style.height = \"0\";\r\n}\r\n// 元素加入到页面之后\r\nfunction handleEnter(el: Element) {\r\n  if (!(el instanceof HTMLElement)) return;\r\n  el.style.height = \"auto\";\r\n  const h = el.clientHeight;\r\n  el.style.height = \"0\";\r\n  requestAnimationFrame(() => {\r\n    el.style.height = h + \"px\";\r\n    el.style.transition = \"0.5s\";\r\n  });\r\n}\r\n// 离开之后\r\nfunction handleAfterEnter(el: any) {\r\n  el.style.transition = \"none\";\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.menu-list {\r\n  position: fixed;\r\n  background-color: #eee;\r\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);\r\n  min-width: 200px;\r\n  border-radius: 5px;\r\n  font-size: 12px;\r\n  color: #1d1d1f;\r\n  overflow: hidden;\r\n  cursor: pointer;\r\n  padding: 5px;\r\n}\r\n\r\n.menu-item {\r\n  border-radius: 5px;\r\n  padding: 3px 5px;\r\n}\r\n\r\n.menu-item:hover {\r\n  background-color: #a0cfff;\r\n}\r\n\r\n// .v-enter-from {\r\n//   opacity: 1;\r\n// }\r\n\r\n// .v-enter-to {\r\n//   transition: 0.5;\r\n//   opacity: 0;\r\n// }\r\n</style>\r\n","<script lang=\"ts\">\nimport { defineComponent } from 'vue'\nexport default defineComponent({\n  name: 'ExCreateForm',\n})\n</script>\n<template>\r\n  <div class=\"ex-create-form\">\r\n    <el-button @click=\"getParams\">获取参数</el-button>\r\n    <el-button @click=\"closeFn\">关闭页面</el-button>\r\n  </div>\r\n</template>\r\n<script name=\"ExCreateForm\" setup lang=\"ts\">\r\nimport { CreateTabPage } from \"@/utils/dealRoute\";\r\nconst tabPage = new CreateTabPage(\"formConfig\");\r\nconst params = tabPage.getParams();\r\nconsole.log(`output->params`, params);\r\nconst getParams = () => {\r\n  const p = tabPage.getParams();\r\n  console.log(`output->p`, p);\r\n};\r\nconst closeFn = () => {\r\n  tabPage.closeTab();\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n@use \"./scss\";\r\n</style>\r\n","<template>\r\n  <div class=\"ex-button-group\">\r\n    \r\n  </div>\r\n</template>\r\n<script name=\"ExButtonGroup\" setup lang=\"ts\"></script>\r\n<style lang=\"scss\" scoped></style>\r\n","<script lang=\"ts\">\nimport { defineComponent } from 'vue'\nexport default defineComponent({\n  name: 'ExInput',\n})\n</script>\n<template>\r\n  <div class=\"ex-input\">\r\n    <el-input v-model=\"modelValue\"></el-input>\r\n  </div>\r\n</template>\r\n<script name=\"ExInput\" setup lang=\"ts\">\r\nimport { useVModel } from \"@vueuse/core\";\r\nconst emits = defineEmits([\"update:modelValue\"]);\r\nconst props = defineProps({\r\n  modelValue: { type: [String, Number], default: \"\" },\r\n  config: { type: Object, default: () => ({}) },\r\n});\r\nconst modelValue = useVModel(props, \"modelValue\", emits);\r\n</script>\r\n<style lang=\"scss\" scoped></style>\r\n","<script lang=\"ts\">\nimport { defineComponent } from 'vue'\nexport default defineComponent({\n  name: 'ExSelect',\n})\n</script>\n<template>\r\n  <div class=\"ex-select\">\r\n    <el-select v-model=\"modelValue\">\r\n      <el-option\r\n        v-for=\"item in config.options\"\r\n        :key=\"item.value\"\r\n        :label=\"item.label\"\r\n        :value=\"item.value\"\r\n        :disabled=\"item.disabled\"\r\n      ></el-option>\r\n    </el-select>\r\n  </div>\r\n</template>\r\n<script name=\"ExSelect\" setup lang=\"ts\">\r\nimport { useVModel } from \"@vueuse/core\";\r\nconst emits = defineEmits([\"update:modelValue\", \"update:config\"]);\r\nconst props = defineProps({\r\n  modelValue: {\r\n    type: [String, Number, Boolean, Object, Array],\r\n    default: \"\",\r\n  },\r\n  config: { type: Object, default: () => ({}) },\r\n});\r\nconst modelValue = useVModel(props, \"modelValue\", emits);\r\nconst config = useVModel(props, \"config\", emits);\r\n</script>\r\n<style lang=\"scss\" scoped></style>\r\n","export default {\r\n  formName: \"exampleForm\",\r\n  id: \"123\",\r\n  schema: \"create\", //create,edit,read\r\n  formConfig: [\r\n    {\r\n      id: \"1\",\r\n      name: \"ex-input\",\r\n      type: \"input\",\r\n      label: \"姓名\",\r\n      field: \"name\",\r\n      defaultValue: \"li\",\r\n      disabled: false,\r\n      rules: [],\r\n    },\r\n    {\r\n      idL: \"2\",\r\n      name: \"ex-input\",\r\n      type: \"input\",\r\n      label: \"年龄\",\r\n      field: \"age\",\r\n      defaultValue: 18,\r\n      disabled: false,\r\n      rules: [],\r\n    },\r\n    {\r\n      id: \"3\",\r\n      name: \"ex-select\",\r\n      type: \"select\",\r\n      label: \"职位\",\r\n      field: \"job\",\r\n      defaultValue: \"1\",\r\n      fullLine: true,\r\n      options: [\r\n        { label: \"员工1\", value: \"1\", disabled: true },\r\n        { label: \"员工2\", value: \"2\" },\r\n        { label: \"员工3\", value: \"3\" },\r\n      ],\r\n      disabled: false,\r\n      rules: [],\r\n    },\r\n  ],\r\n};\r\n","<script lang=\"ts\">\nimport { defineComponent } from 'vue'\nexport default defineComponent({\n  name: 'ExForm',\n})\n</script>\n<template>\r\n  <div class=\"ex-form\">\r\n    <el-form class=\"form-container\" @submit.prevent=\"submitFn\">\r\n      <template v-for=\"item in formConfig\">\r\n        <el-form-item\r\n          :prop=\"item.id\"\r\n          :rules=\"item.rules\"\r\n          class=\"ex-form-item\"\r\n          :class=\"{ 'full-line': item.fullLine }\"\r\n          :label=\"`${item.label}:`\"\r\n        >\r\n          <component\r\n            class=\"ex-form-content\"\r\n            :is=\"item.name\"\r\n            v-model=\"formData[item.field]\"\r\n            v-bind=\"{ config: item }\"\r\n            @change=\"emitChangeFn($event)\"\r\n          />\r\n        </el-form-item>\r\n      </template>\r\n    </el-form>\r\n    <div class=\"ex-form-btn\">\r\n      <el-button @click=\"submitFn\" type=\"primary\">提交</el-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script name=\"ExForm\" setup lang=\"ts\">\r\nimport { reactive } from \"vue\";\r\nimport cfg from \"./config\";\r\ntype DefaultFormData = Record<\r\n  (typeof cfg.formConfig)[number][\"field\"], //key\r\n  (typeof cfg.formConfig)[number][\"defaultValue\"] //value\r\n>;\r\nconst formConfig = reactive(cfg.formConfig);\r\nconst formData = reactive(\r\n  cfg.formConfig.reduce((pre, cur) => {\r\n    pre[cur.field] = cur.defaultValue;\r\n    return pre;\r\n  }, {} as DefaultFormData)\r\n);\r\nconst emitChangeFn = (e: any) => {\r\n  console.log(`output->change`, e);\r\n};\r\nconst submitFn = () => {\r\n  console.log(`output->提交`, formData);\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n@use \"./scss/index.scss\";\r\n</style>\r\n","<script lang=\"ts\">\nimport { defineComponent } from 'vue'\nexport default defineComponent({\n  name: 'ExSubMenu',\n})\n</script>\n<template>\r\n  <div class=\"ex-sub-menu\">\r\n    <el-sub-menu :index=\"data.index\">\r\n      <template #title>{{ data.title }}</template>\r\n      <template v-for=\"item in data.children\" :key=\"item.index + item.title\">\r\n        <ExSubMenu\r\n          v-if=\"\r\n            item.children &&\r\n            Array.isArray(item.children) &&\r\n            item.children.length != 0\r\n          \"\r\n          :data=\"item\"\r\n        >\r\n        </ExSubMenu>\r\n        <el-menu-item v-else :index=\"item.index\">{{ item.title }}</el-menu-item>\r\n      </template>\r\n    </el-sub-menu>\r\n  </div>\r\n</template>\r\n<script name=\"ExSubMenu\" setup lang=\"ts\">\r\nimport { PropType } from \"vue\";\r\nimport type { ExMenuItemType } from \"@/types/store\";\r\ndefineProps({\r\n  data: {\r\n    type: Object as PropType<ExMenuItemType>,\r\n    default: () => ({}),\r\n  },\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\" scoped></style>\r\n","<script lang=\"ts\">\nimport { defineComponent } from 'vue'\nexport default defineComponent({\n  name: 'ExMenu',\n})\n</script>\n<template>\r\n  <div class=\"ex-menu\">\r\n    <el-menu\r\n      :default-openeds=\"defaultOpeneds\"\r\n      :default-active=\"defaultActive\"\r\n      :collapse=\"collapse\"\r\n      :mode=\"mode\"\r\n      :unique-opened=\"true\"\r\n      @select=\"selectFn\"\r\n      @open=\"openFn\"\r\n      @close=\"closeFn\"\r\n    >\r\n      <template v-for=\"item in data\" :key=\"item.index + item.title\">\r\n        <ExSubMenu\r\n          v-if=\"item.children && item.children.length != 0\"\r\n          :data=\"item\"\r\n        >\r\n        </ExSubMenu>\r\n        <el-menu-item v-else :index=\"item.index\">{{ item.title }}</el-menu-item>\r\n      </template>\r\n    </el-menu>\r\n  </div>\r\n</template>\r\n<script name=\"ExMenu\" setup lang=\"ts\">\r\nimport { PropType } from \"vue\";\r\nimport ExSubMenu from \"./components/ExSubMenu.vue\";\r\nimport type { ExMenuItemType } from \"@/types/store\";\r\ndefineProps({\r\n  data: {\r\n    type: Array as PropType<ExMenuItemType[]>,\r\n    required: true,\r\n    default: () => [],\r\n  },\r\n  defaultActive: {\r\n    type: String,\r\n    default: \"\",\r\n  },\r\n  defaultOpeneds: {\r\n    type: Array as PropType<string[]>,\r\n    default: () => [] as string[],\r\n  },\r\n  mode: {\r\n    type: String as PropType<\"horizontal\" | \"vertical\">,\r\n  },\r\n  collapse: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n});\r\nconst emit = defineEmits<{\r\n  select: [index: string, indexPaths: string[]];\r\n  open: [index: string, indexPaths: string[]];\r\n  close: [index: string, indexPaths: string[]];\r\n}>();\r\nconst selectFn = (index: string, indexPaths: string[]) => {\r\n  emit(\"select\", index, indexPaths);\r\n};\r\nconst openFn = (index: string, indexPaths: string[]) => {\r\n  emit(\"open\", index, indexPaths);\r\n};\r\nconst closeFn = (index: string, indexPaths: string[]) => {\r\n  emit(\"close\", index, indexPaths);\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.ex-menu {\r\n  overflow-y: auto;\r\n  user-select: none;\r\n  .el-menu {\r\n    height: 100%;\r\n  }\r\n}\r\n</style>\r\n","// {\r\n//   \"dyn_id\": \"981118307352444930\",\r\n//   \"dyn_type\": 8\r\n\r\n// },\r\nconst data = [\r\n  {\r\n    dyn_id: \"981118307352444930\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"981099233446723617\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"980962374298107942\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"980962370015723573\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"980948226680029184\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"980731777499791478\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"980699552380092432\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"980686658843181057\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"980685542413828200\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"980680190643404882\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"980591551144001541\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"980591289127927816\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"980591284853932066\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"980220203962990627\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"980220199672217632\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"979478033604804662\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"979478033601658897\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"979463916016893989\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"979448505697304598\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"979268666852900901\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"979264853131657234\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"979255137683898408\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"979235638539714577\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"979200784894787617\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"979193328822124665\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"979106952691843081\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"979106948400021509\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"979100523169841158\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"978830094859501573\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"978814504087322675\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"978737323772477506\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"978735863223549991\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"978735858985205816\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"978721711350349860\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"978458893704232965\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"978364778091118614\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"978364773766791203\",\r\n    dyn_type: 8,\r\n  },\r\n];\r\nexport declare interface TableConfig {\r\n  showIndex: boolean;\r\n  showSelection: boolean;\r\n  currentPage: number;\r\n  pageSize: number;\r\n  height?: number;\r\n  api: string;\r\n  loading: boolean;\r\n  showOverflowTooltip: boolean;\r\n  colSlots: string[];\r\n  columns: { prop: string; label: string }[];\r\n  query: object;\r\n  tableData: any[];\r\n  total: number;\r\n  background: boolean;\r\n  pageSizes: number[];\r\n  layout: string;\r\n}\r\nexport const tableConfig: TableConfig = {\r\n  // 表格配置\r\n  query: {},\r\n  tableData: data,\r\n  showIndex: true,\r\n  showSelection: true,\r\n  currentPage: 1,\r\n  pageSize: 10,\r\n  height: 200,\r\n  api: \"\",\r\n  loading: false,\r\n  showOverflowTooltip: true,\r\n  colSlots: [\"dyn_id\"],\r\n  columns: [\r\n    { prop: \"dyn_id\", label: \"a表头\" },\r\n    { prop: \"dyn_type\", label: \"b表头\" },\r\n  ],\r\n  // 分页配置\r\n  total: 1000,\r\n  background: true,\r\n  pageSizes: [10, 20, 30, 40, 50, 100],\r\n  layout: \"total,prev, pager, next,layout,sizes\",\r\n};\r\nexport const setTableConfig = (cfg?: object) => {\r\n  return {\r\n    ...tableConfig,\r\n    ...cfg,\r\n  };\r\n};\r\nexport const getTableConfig = () => {\r\n  return {\r\n    ...tableConfig,\r\n  };\r\n};\r\n","<script lang=\"ts\">\nimport { defineComponent } from 'vue'\nexport default defineComponent({\n  name: 'ExTable',\n})\n</script>\n<template>\r\n  <div class=\"ex-table\" v-loading=\"model.loading\">\r\n    <!-- 搜索 -->\r\n    <div class=\"search-comps\">\r\n      <el-input v-model=\"model.query\"></el-input>\r\n    </div>\r\n    <div class=\"search-btn\">\r\n      <el-button type=\"primary\" @click=\"searchFn\">搜索</el-button>\r\n    </div>\r\n    <!-- 表格 -->\r\n    <div\r\n      class=\"table-container\"\r\n      ref=\"tableContainer\"\r\n      v-size-ob=\"tableSizeChange\"\r\n    >\r\n      <el-table :data=\"model.tableData\" ref=\"table\" :height=\"model.height\">\r\n        <!-- 表格选择列 -->\r\n        <el-table-column type=\"selection\"></el-table-column>\r\n        <!-- 表格序列 -->\r\n        <el-table-column\r\n          type=\"index\"\r\n          label=\"序号\"\r\n          width=\"60\"\r\n          :index=\"indexMethod\"\r\n        >\r\n        </el-table-column>\r\n        <!-- 表格内容列 -->\r\n        <el-table-column\r\n          v-for=\"(item, index) in model.columns\"\r\n          :key=\"index\"\r\n          :prop=\"item.prop\"\r\n          :label=\"item.label\"\r\n          :show-overflow-tooltip=\"model.showOverflowTooltip\"\r\n        >\r\n          <template #default=\"{ row }\">\r\n            <!-- 表格内容单元格插槽 -->\r\n            <slot\r\n              v-if=\"model.colSlots.includes(item.prop)\"\r\n              :name=\"item.prop\"\r\n              :row=\"row\"\r\n            ></slot>\r\n            <!-- 内容单元格默认显示字段 -->\r\n            <div v-else>{{ row[item.prop] }}</div>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </div>\r\n    <!-- 分页 -->\r\n    <div class=\"pagination-container\">\r\n      <el-pagination\r\n        ref=\"pagination\"\r\n        :total=\"model.total\"\r\n        :background=\"model.background\"\r\n        :layout=\"model.layout\"\r\n        :current-page=\"model.currentPage\"\r\n        v-model:page-size=\"model.pageSize\"\r\n        @update:current-page=\"currentPageChange\"\r\n        @update:page-size=\"pageSizeChange\"\r\n        :page-sizes=\"model.pageSizes\"\r\n      ></el-pagination>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script name=\"ExTable\" setup lang=\"ts\">\r\nimport { onMounted, PropType, useTemplateRef } from \"vue\";\r\n// import { getData } from \"@/axios/test\";\r\nimport { tableConfig, setTableConfig } from \"./tableConfig\";\r\nimport { useVModel } from \"@vueuse/core\";\r\nconst table = useTemplateRef(\"table\");\r\nconst pagination = useTemplateRef(\"pagination\");\r\ndefineExpose({\r\n  table,\r\n  pagination,\r\n});\r\n\r\nconst emits = defineEmits([\"update:modelValue\"]);\r\nconst props = defineProps({\r\n  modelValue: {\r\n    type: Object as PropType<typeof tableConfig>,\r\n    default: () => setTableConfig(),\r\n  },\r\n});\r\nconst model = useVModel(props, \"modelValue\", emits);\r\n\r\nonMounted(() => {});\r\nconst tableSizeChange = (rect: { width: number; height: number }) => {\r\n  model.value.height = rect.height;\r\n};\r\nconst searchFn = () => {\r\n  getTableData(1);\r\n};\r\nconst getTableData = async (currentPage?: number, pageSize?: number) => {\r\n  console.log(`output->获取表格数据`);\r\n  if (model.value.loading) return;\r\n  model.value.loading = true;\r\n  model.value.currentPage = currentPage || model.value.currentPage;\r\n  model.value.pageSize = pageSize || model.value.pageSize;\r\n  try {\r\n    // await getData({ a: 1 });\r\n  } catch (error) {\r\n    console.log(\"请求表格数据失败\", error);\r\n  } finally {\r\n    model.value.loading = false;\r\n  }\r\n};\r\nconst currentPageChange = (value: number) => {\r\n  getTableData(value);\r\n};\r\nconst pageSizeChange = (value: number) => {\r\n  getTableData(1, value);\r\n};\r\nconst indexMethod = (index: number) => {\r\n  return index + 1 + (model.value.currentPage - 1) * model.value.pageSize;\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.ex-table {\r\n  height: 100%;\r\n  display: grid;\r\n  grid-template-areas:\r\n    \"search-comps search-btn\"\r\n    \"table-container table-container\"\r\n    \"pagination-container pagination-container\";\r\n  grid-template-columns: 10fr 1fr;\r\n  grid-template-rows: auto 1fr auto;\r\n  gap: 10px;\r\n  .search-container {\r\n    grid-area: search-container;\r\n  }\r\n  .table-container {\r\n    grid-area: table-container;\r\n    overflow: auto;\r\n  }\r\n  .pagination-container {\r\n    grid-area: pagination-container;\r\n    .el-pagination {\r\n      justify-content: end;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import { App } from \"vue\";\r\n// 注册全局组件\r\nexport function setGlobalComponents(app: App<Element>) {\r\n  const comps: Record<string, object> = import.meta.glob(\"./**/**/index.vue\", {\r\n    import: \"default\",\r\n    eager: true,\r\n  });\r\n  Object.keys(comps).map((key) => {\r\n    const paths = key.split(\"/\");\r\n    const compName = paths[paths.length - 2];\r\n    app.component(compName, comps[key]);\r\n  });\r\n}\r\n"],"names":["__default__","defineComponent","vw","vh","useViewPort","containerRef","ref","x","y","showMenu","useContextMenu","emit","__emit","w","h","handleSizeChange","rect","width","height","pos","computed","posX","posY","handleMenuItem","item","handleBeforeEnter","el","handleEnter","handleAfterEnter","tabPage","CreateTabPage","params","getParams","p","closeFn","_sfc_render","_ctx","_cache","modelValue","useVModel","__props","emits","props","config","cfg","formConfig","reactive","formData","pre","cur","emitChangeFn","e","submitFn","selectFn","index","indexPaths","openFn","data","tableConfig","setTableConfig","getTableConfig","table","useTemplateRef","pagination","__expose","model","onMounted","tableSizeChange","searchFn","getTableData","currentPage","pageSize","error","currentPageChange","value","pageSizeChange","indexMethod","setGlobalComponents","app","comps","__vite_glob_0_0","__vite_glob_0_1","__vite_glob_0_2","__vite_glob_0_3","__vite_glob_0_4","__vite_glob_0_5","__vite_glob_0_6","__vite_glob_0_7","key","paths","compName"],"mappings":"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"}