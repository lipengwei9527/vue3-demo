{"version":3,"file":"hooks.Ta0axOoa.js","sources":["../../src/hooks/useContextMenu.ts","../../src/hooks/useViewPort.ts","../../src/hooks/useTheme.ts"],"sourcesContent":["/**\r\n * @description 获取鼠标点击的位置，及是否显示\r\n */\r\nimport { ref, onMounted, onBeforeUnmount, Ref } from \"vue\";\r\n/**\r\n *\r\n * @param containerRef ref绑定的dom\r\n * @returns { showMenu, x, y }\r\n * showMenu-是否显示菜单\r\n * x-鼠标点击的ClientX(鼠标距离视口左边的距离)\r\n * y-鼠标点击的clientY(鼠标距离视口顶部的距离)\r\n */\r\nexport default function useContextMenu(containerRef: Ref) {\r\n  // showMenu-是否显示菜单:true-是,false-否\r\n  const showMenu = ref(false);\r\n  // 鼠标点击位置距离窗口左边的距离\r\n  const x = ref(0);\r\n  // 鼠标点击位置距离窗口顶部的距离\r\n  const y = ref(0);\r\n  // 打开右键菜单\r\n  const handleContextMenu = (e: MouseEvent) => {\r\n    showMenu.value = true;\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    x.value = e.clientX;\r\n    y.value = e.clientY;\r\n  };\r\n  //   关闭左键菜单\r\n  function closeContextMenu() {\r\n    showMenu.value = false;\r\n  }\r\n  onMounted(() => {\r\n    const div = containerRef.value;\r\n    div.addEventListener(\"contextmenu\", handleContextMenu);\r\n    window.addEventListener(\"click\", closeContextMenu, true);\r\n    window.addEventListener(\"contextmenu\", closeContextMenu, true);\r\n  });\r\n  onBeforeUnmount(() => {\r\n    const div = containerRef.value;\r\n    div.removeEventListener(\"contextmenu\", handleContextMenu);\r\n    window.removeEventListener(\"click\", closeContextMenu, true);\r\n    window.removeEventListener(\"contextmenu\", closeContextMenu, true);\r\n  });\r\n  return { showMenu, x, y };\r\n}\r\n","/**\r\n * @description 获取浏览器视口的宽度高度\r\n */\r\nimport { ref } from \"vue\";\r\n// 不包括浏览器滚动条\r\n// 视口的宽度\r\nconst vw = ref(document.documentElement.clientWidth);\r\n// 视口的高度\r\nconst vh = ref(document.documentElement.clientHeight);\r\nwindow.addEventListener(\"resize\", () => {\r\n  vw.value = document.documentElement.clientWidth;\r\n  vh.value = document.documentElement.clientHeight;\r\n});\r\n/**\r\n * @description 获取视口的宽度高度\r\n * @returns { vw, vh}\r\n * vw-视口的宽度\r\n * vh-视口的高度\r\n */\r\nexport default function () {\r\n  return {\r\n    vw,\r\n    vh,\r\n  };\r\n}\r\n","/**\r\n * @description: 获取主题\r\n */\r\nimport { ref, watch } from \"vue\";\r\ntype Theme = \"light\" | \"dark\" | \"os\";\r\n// localStorage中主题的key\r\nconst themeKey = \"__theme__\";\r\nlet theme = ref<Theme>((localStorage.getItem(themeKey) as Theme) || \"light\");\r\n// 获取系统的主题\r\nconst match = window.matchMedia(\"(prefers-color-scheme: dark)\");\r\nconst ele = document.documentElement;\r\n// 跟随系统主题\r\nfunction followSystem() {\r\n  console.log(\"系统主题发生改变\", match);\r\n  let theme;\r\n  let unTheme;\r\n  if (match.matches) {\r\n    theme = \"dark\";\r\n    unTheme = \"light\";\r\n  } else {\r\n    theme = \"light\";\r\n    unTheme = \"dark\";\r\n  }\r\n  ele.classList.remove(unTheme);\r\n  ele.classList.add(theme);\r\n  ele.dataset.theme = theme;\r\n}\r\n\r\nwatch(\r\n  theme,\r\n  (newValue, oldValue) => {\r\n    localStorage.setItem(themeKey, newValue);\r\n    if (theme.value == \"os\") {\r\n      // 跟随系统主题\r\n      console.log(`output->监听系统主题`);\r\n      match.addEventListener(\"change\", followSystem);\r\n      followSystem();\r\n    } else {\r\n      // 自定义主题\r\n      match.removeEventListener(\"change\", followSystem);\r\n      if (oldValue) ele.classList.remove(oldValue);\r\n      ele.classList.add(newValue);\r\n      ele.dataset.theme = newValue;\r\n    }\r\n  },\r\n  {\r\n    immediate: true,\r\n  }\r\n);\r\nexport default function () {\r\n  return theme;\r\n}\r\n"],"names":["useContextMenu","containerRef","showMenu","ref","x","y","handleContextMenu","e","closeContextMenu","onMounted","onBeforeUnmount","vw","vh","useViewPort","themeKey","theme","match","ele","followSystem","unTheme","watch","newValue","oldValue","useTheme"],"mappings":"8DAYA,SAAwBA,EAAeC,EAAmB,CAElD,MAAAC,EAAWC,EAAI,EAAK,EAEpBC,EAAID,EAAI,CAAC,EAETE,EAAIF,EAAI,CAAC,EAETG,EAAqBC,GAAkB,CAC3CL,EAAS,MAAQ,GACjBK,EAAE,eAAe,EACjBA,EAAE,gBAAgB,EAClBH,EAAE,MAAQG,EAAE,QACZF,EAAE,MAAQE,EAAE,OAAA,EAGd,SAASC,GAAmB,CAC1BN,EAAS,MAAQ,EACnB,CACA,OAAAO,EAAU,IAAM,CACFR,EAAa,MACrB,iBAAiB,cAAeK,CAAiB,EAC9C,OAAA,iBAAiB,QAASE,EAAkB,EAAI,EAChD,OAAA,iBAAiB,cAAeA,EAAkB,EAAI,CAAA,CAC9D,EACDE,EAAgB,IAAM,CACRT,EAAa,MACrB,oBAAoB,cAAeK,CAAiB,EACjD,OAAA,oBAAoB,QAASE,EAAkB,EAAI,EACnD,OAAA,oBAAoB,cAAeA,EAAkB,EAAI,CAAA,CACjE,EACM,CAAE,SAAAN,EAAU,EAAAE,EAAG,EAAAC,EACxB,CCtCA,MAAMM,EAAKR,EAAI,SAAS,gBAAgB,WAAW,EAE7CS,EAAKT,EAAI,SAAS,gBAAgB,YAAY,EACpD,OAAO,iBAAiB,SAAU,IAAM,CACnCQ,EAAA,MAAQ,SAAS,gBAAgB,YACjCC,EAAA,MAAQ,SAAS,gBAAgB,YACtC,CAAC,EAO0B,SAAAC,GAAA,CAClB,MAAA,CACL,GAAAF,EACA,GAAAC,CAAA,CAEJ,CClBA,MAAME,EAAW,YACjB,IAAIC,EAAQZ,EAAY,aAAa,QAAQW,CAAQ,GAAe,OAAO,EAE3E,MAAME,EAAQ,OAAO,WAAW,8BAA8B,EACxDC,EAAM,SAAS,gBAErB,SAASC,GAAe,CACd,QAAA,IAAI,WAAYF,CAAK,EACzBD,IAAAA,EACAI,EACAH,EAAM,SACRD,EAAQ,OACEI,EAAA,UAEVJ,EAAQ,QACEI,EAAA,QAERF,EAAA,UAAU,OAAOE,CAAO,EACxBF,EAAA,UAAU,IAAIF,CAAK,EACvBE,EAAI,QAAQ,MAAQF,CACtB,CAEAK,EACEL,EACA,CAACM,EAAUC,IAAa,CACT,aAAA,QAAQR,EAAUO,CAAQ,EACnCN,EAAM,OAAS,MAEjB,QAAQ,IAAI,gBAAgB,EACtBC,EAAA,iBAAiB,SAAUE,CAAY,EAChCA,MAGPF,EAAA,oBAAoB,SAAUE,CAAY,EAC5CI,GAAUL,EAAI,UAAU,OAAOK,CAAQ,EACvCL,EAAA,UAAU,IAAII,CAAQ,EAC1BJ,EAAI,QAAQ,MAAQI,EAExB,EACA,CACE,UAAW,EACb,CACF,EAC2B,SAAAE,GAAA,CAClB,OAAAR,CACT"}