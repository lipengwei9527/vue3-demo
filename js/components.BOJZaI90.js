import{a as B,b as X,c as ne,d as ae,e as oe,f as le,g as se,h as J,i as de,j as ue,k as ie,v as re,l as ce}from"./vendor-element-plus.DGd9-5Lt.js";import{h as P}from"./vendor-moment.C5S46NFB.js";import{u as I}from"./vendor-@vueuse.DAAQwMeU.js";import{c as _e,C as pe}from"./utils.BtKnTzZW.js";import{d as m,e as ye,f as A,o as n,g as _,h as E,a as g,w as v,t as M,u as f,F as k,i as S,j as D,n as K,k as L,l as j,m as fe,p as Q,c as w,T as me,q as ge,s as q,v as ve,x as he,y as W,z as be,A as xe,B as Ce,r as Ee,C as R,D as $e}from"./vendor-@vue.iaL7E5-3.js";import{_ as F}from"./index.C1u_2OfQ.js";import{u as ke,a as Ve}from"./hooks.inIqdS7Z.js";const Se=42;function Y(a,r=0){a=P(a).subtract(r,"month").format("YYYY-MM");const c=P(a).startOf("month"),d=P(a).endOf("month").diff(c,"days")+1;let u=new Date(a).getDay();return u===0&&(u=7),{date:a,days:d,firstDayOfMonth:u}}function De(a){let r=new Date(a||new Date),c=Y(r,1),s=Y(r),d=Y(r,-1),u=[];for(let t=s.firstDayOfMonth;t>1;t--){let e=N();e.day=c.days-t+2,e.date=c.date+"-"+(e.day<10?"0"+e.day:e.day),e.type="pre",u.push(e)}for(let t=0;t<s.days;t++){let e=N();e.day=t+1,e.date=s.date+"-"+(e.day<10?"0"+e.day:e.day),e.type="cur",u.push(e)}for(let t=1;t<Se-s.days-s.firstDayOfMonth+2;t++){let e=N();e.day=t,e.date=d.date+"-"+(e.day<10?"0"+e.day:e.day),e.type="next",u.push(e)}return u}function N(){return{day:0,date:"",type:"",disabled:!1}}const we={class:"ex-calendar"},Me={class:"calendar-head"},Te={class:"ex-calendar-table"},ze={class:"week-item"},Fe=["onClick"],Oe={key:0},Ie=m({name:"ExCalendar"}),Pe=m({...Ie,props:{modelValue:{type:[Date,String],default:()=>new Date},startTime:{type:[String,Date],default:""},banTime:{type:Array,default:()=>[]},endTime:{type:[String,Date],default:""}},emits:["select","update:modelValue"],setup(a,{emit:r}){const c=ye(),s=a,d=r;let u=I(s,"modelValue",d);const t=["一","二","三","四","五","六","日"],e=A([]);let h=A([]);const C=i=>({"calendar-item":!0,"pre-month":i.type=="pre","next-month":i.type=="next",allow:!T(i),ban:T(i),selected:O(i)}),l=i=>{const p=[];let o=[];return i.forEach((y,x)=>{o.push(y),(x+1)%7==0&&(p.push(o),o=[])}),p},$=(i=0,p="month")=>{const o=_e(P(u.value).subtract(i,p).toString(),"YYYY-MM");u.value=o,h.length=0,h.push(...l(De(o)))};$();const T=i=>{let p=new Date(i.date).getTime(),o=new Date(s.startTime).getTime(),y=new Date(s.endTime).getTime(),x=s.banTime.find(z=>new Date(z).getTime()==p);return p<=o||p>=y||x?(i.disabled=!0,!0):!1},O=i=>!!e.find(p=>p.date==i.date),b=i=>{if(!i.disabled){if(e.length!=0&&e.find(p=>p.date==i.date)){e.length=0;return}e.length=0,e.push(i),d("select",e)}};return(i,p)=>{const o=B;return n(),_("div",we,[E("div",null,[g(o,{type:"primary",onClick:p[0]||(p[0]=y=>$(1))},{default:v(()=>p[2]||(p[2]=[D("上月")])),_:1}),g(o,{type:"primary",onClick:p[1]||(p[1]=y=>$(-1))},{default:v(()=>p[3]||(p[3]=[D("下月")])),_:1})]),E("div",Me,M(f(u)),1),E("table",Te,[E("thead",null,[(n(),_(k,null,S(t,y=>E("th",ze,M(y),1)),64))]),E("tbody",null,[(n(!0),_(k,null,S(f(h),y=>(n(),_("tr",null,[(n(!0),_(k,null,S(y,x=>(n(),_("td",null,[E("div",{class:K(C(x)),onClick:z=>b(x)},[Object.keys(f(c)).length==0?(n(),_("div",Oe,M(x.day),1)):L(i.$slots,"default",{key:1,data:x},void 0,!0)],10,Fe)]))),256))]))),256))])])])}}}),Ae=F(Pe,[["__scopeId","data-v-7c513e33"]]),Be=["onClick"],je=m({name:"ExContextMenu"}),Ye=m({...je,props:{menu:{type:Array,default:()=>[]}},emits:["select"],setup(a,{emit:r}){const{vw:c,vh:s}=Ve(),d=j(),{x:u,y:t,showMenu:e}=ke(d),h=r,C=j(0),l=j(0);function $(o){const{width:y,height:x}=o;C.value=y,l.value=x}const T=fe(()=>{let o=u.value,y=t.value;return o>c.value-C.value&&(o-=C.value),s.value-y<l.value&&(y=s.value-l.value),{posX:o,posY:y}});function O(o){e.value=!1,h("select",o)}function b(o){o instanceof HTMLElement&&(o.style.height="0")}function i(o){if(!(o instanceof HTMLElement))return;o.style.height="auto";const y=o.clientHeight;o.style.height="0",requestAnimationFrame(()=>{o.style.height=y+"px",o.style.transition="0.5s"})}function p(o){o.style.transition="none"}return(o,y)=>{const x=Q("size-ob");return n(),_("div",{ref_key:"containerRef",ref:d,class:"ex-context-menu"},[L(o.$slots,"default",{},void 0,!0),(n(),w(ge,{to:"body"},[g(me,{onBeforeEnter:b,onEnter:i,onAfterEnter:p},{default:v(()=>[E("div",null,[f(e)?q((n(),_("div",{key:0,class:"menu-list",style:ve({left:T.value.posX+"px",top:T.value.posY+"px"})},[(n(!0),_(k,null,S(a.menu,z=>(n(),_("div",{class:"menu-item",onClick:U=>O(z)},M(z.label),9,Be))),256))],4)),[[x,$]]):he("",!0)])]),_:1})]))],512)}}}),Ne=F(Ye,[["__scopeId","data-v-e6698d90"]]),qe={class:"ex-create-form"},Le=m({name:"ExCreateForm"}),Ue=m({...Le,setup(a){const r=new pe("formConfig"),c=r.getParams();console.log("output->params",c);const s=()=>{const u=r.getParams();console.log("output->p",u)},d=()=>{r.closeTab()};return(u,t)=>{const e=B;return n(),_("div",qe,[g(e,{onClick:s},{default:v(()=>t[0]||(t[0]=[D("获取参数")])),_:1}),g(e,{onClick:d},{default:v(()=>t[1]||(t[1]=[D("关闭页面")])),_:1})])}}}),He=F(Ue,[["__scopeId","data-v-4c13e510"]]),Re={},Ge={class:"ex-button-group"};function Xe(a,r){return n(),_("div",Ge)}const Je=F(Re,[["render",Xe]]),Ke={class:"ex-input"},Qe=m({name:"ExInput"}),We=m({...Qe,props:{modelValue:{type:[String,Number],default:""},config:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(a,{emit:r}){const d=I(a,"modelValue",r);return(u,t)=>{const e=X;return n(),_("div",Ke,[g(e,{modelValue:f(d),"onUpdate:modelValue":t[0]||(t[0]=h=>W(d)?d.value=h:null)},null,8,["modelValue"])])}}}),Ze={class:"ex-select"},et=m({name:"ExSelect"}),tt=m({...et,props:{modelValue:{type:[String,Number,Boolean,Object,Array],default:""},config:{type:Object,default:()=>({})}},emits:["update:modelValue","update:config"],setup(a,{emit:r}){const c=r,s=a,d=I(s,"modelValue",c),u=I(s,"config",c);return(t,e)=>{const h=ae,C=ne;return n(),_("div",Ze,[g(C,{modelValue:f(d),"onUpdate:modelValue":e[0]||(e[0]=l=>W(d)?d.value=l:null)},{default:v(()=>[(n(!0),_(k,null,S(f(u).options,l=>(n(),w(h,{key:l.value,label:l.label,value:l.value,disabled:l.disabled},null,8,["label","value","disabled"]))),128))]),_:1},8,["modelValue"])])}}}),G={formName:"exampleForm",id:"123",schema:"create",formConfig:[{id:"1",name:"ex-input",type:"input",label:"姓名",field:"name",defaultValue:"li",disabled:!1,rules:[]},{idL:"2",name:"ex-input",type:"input",label:"年龄",field:"age",defaultValue:18,disabled:!1,rules:[]},{id:"3",name:"ex-select",type:"select",label:"职位",field:"job",defaultValue:"1",fullLine:!0,options:[{label:"员工1",value:"1",disabled:!0},{label:"员工2",value:"2"},{label:"员工3",value:"3"}],disabled:!1,rules:[]}]},nt={class:"ex-form"},at={class:"ex-form-btn"},ot=m({name:"ExForm"}),lt=m({...ot,setup(a){const r=A(G.formConfig),c=A(G.formConfig.reduce((u,t)=>(u[t.field]=t.defaultValue,u),{})),s=u=>{console.log("output->change",u)},d=()=>{console.log("output->提交",c)};return(u,t)=>{const e=le,h=oe,C=B;return n(),_("div",nt,[g(h,{class:"form-container",onSubmit:be(d,["prevent"])},{default:v(()=>[(n(!0),_(k,null,S(r,l=>(n(),w(e,{prop:l.id,rules:l.rules,class:K(["ex-form-item",{"full-line":l.fullLine}]),label:`${l.label}:`},{default:v(()=>[(n(),w(xe(l.name),Ce({class:"ex-form-content",modelValue:c[l.field],"onUpdate:modelValue":$=>c[l.field]=$,ref_for:!0},{config:l},{onChange:t[0]||(t[0]=$=>s($))}),null,16,["modelValue","onUpdate:modelValue"]))]),_:2},1032,["prop","rules","class","label"]))),256))]),_:1}),E("div",at,[g(C,{onClick:d,type:"primary"},{default:v(()=>t[1]||(t[1]=[D("提交")])),_:1})])])}}}),st=F(lt,[["__scopeId","data-v-fb16d20d"]]),dt={class:"ex-sub-menu"},ut=m({name:"ExSubMenu"}),it=m({...ut,props:{data:{type:Object,default:()=>({})}},setup(a){return(r,c)=>{const s=Ee("ExSubMenu",!0),d=J,u=se;return n(),_("div",dt,[g(u,{index:a.data.index},{title:v(()=>[D(M(a.data.title),1)]),default:v(()=>[(n(!0),_(k,null,S(a.data.children,t=>(n(),_(k,{key:t.index+t.title},[t.children&&Array.isArray(t.children)&&t.children.length!=0?(n(),w(s,{key:0,data:t},null,8,["data"])):(n(),w(d,{key:1,index:t.index},{default:v(()=>[D(M(t.title),1)]),_:2},1032,["index"]))],64))),128))]),_:1},8,["index"])])}}}),rt={class:"ex-menu"},ct=m({name:"ExMenu"}),_t=m({...ct,props:{data:{type:Array,required:!0,default:()=>[]},defaultActive:{type:String,default:""},defaultOpeneds:{type:Array,default:()=>[]},mode:{type:String},collapse:{type:Boolean,default:!1}},emits:["select","open","close"],setup(a,{emit:r}){const c=r,s=(t,e)=>{c("select",t,e)},d=(t,e)=>{c("open",t,e)},u=(t,e)=>{c("close",t,e)};return(t,e)=>{const h=J,C=de;return n(),_("div",rt,[g(C,{"default-openeds":a.defaultOpeneds,"default-active":a.defaultActive,collapse:a.collapse,mode:a.mode,"unique-opened":!0,onSelect:s,onOpen:d,onClose:u},{default:v(()=>[(n(!0),_(k,null,S(a.data,l=>(n(),_(k,{key:l.index+l.title},[l.children&&l.children.length!=0?(n(),w(it,{key:0,data:l},null,8,["data"])):(n(),w(h,{key:1,index:l.index},{default:v(()=>[D(M(l.title),1)]),_:2},1032,["index"]))],64))),128))]),_:1},8,["default-openeds","default-active","collapse","mode"])])}}}),pt=F(_t,[["__scopeId","data-v-9da5f228"]]),yt=[{dyn_id:"981118307352444930",dyn_type:8},{dyn_id:"981099233446723617",dyn_type:8},{dyn_id:"980962374298107942",dyn_type:8},{dyn_id:"980962370015723573",dyn_type:8},{dyn_id:"980948226680029184",dyn_type:8},{dyn_id:"980731777499791478",dyn_type:8},{dyn_id:"980699552380092432",dyn_type:8},{dyn_id:"980686658843181057",dyn_type:8},{dyn_id:"980685542413828200",dyn_type:8},{dyn_id:"980680190643404882",dyn_type:8},{dyn_id:"980591551144001541",dyn_type:8},{dyn_id:"980591289127927816",dyn_type:8},{dyn_id:"980591284853932066",dyn_type:8},{dyn_id:"980220203962990627",dyn_type:8},{dyn_id:"980220199672217632",dyn_type:8},{dyn_id:"979478033604804662",dyn_type:8},{dyn_id:"979478033601658897",dyn_type:8},{dyn_id:"979463916016893989",dyn_type:8},{dyn_id:"979448505697304598",dyn_type:8},{dyn_id:"979268666852900901",dyn_type:8},{dyn_id:"979264853131657234",dyn_type:8},{dyn_id:"979255137683898408",dyn_type:8},{dyn_id:"979235638539714577",dyn_type:8},{dyn_id:"979200784894787617",dyn_type:8},{dyn_id:"979193328822124665",dyn_type:8},{dyn_id:"979106952691843081",dyn_type:8},{dyn_id:"979106948400021509",dyn_type:8},{dyn_id:"979100523169841158",dyn_type:8},{dyn_id:"978830094859501573",dyn_type:8},{dyn_id:"978814504087322675",dyn_type:8},{dyn_id:"978737323772477506",dyn_type:8},{dyn_id:"978735863223549991",dyn_type:8},{dyn_id:"978735858985205816",dyn_type:8},{dyn_id:"978721711350349860",dyn_type:8},{dyn_id:"978458893704232965",dyn_type:8},{dyn_id:"978364778091118614",dyn_type:8},{dyn_id:"978364773766791203",dyn_type:8}],Z={query:{},tableData:yt,showIndex:!0,showSelection:!0,currentPage:1,pageSize:10,height:200,api:"",loading:!1,showOverflowTooltip:!0,colSlots:["dyn_id"],columns:[{prop:"dyn_id",label:"a表头"},{prop:"dyn_type",label:"b表头"}],total:1e3,background:!0,pageSizes:[10,20,30,40,50,100],layout:"total,prev, pager, next,layout,sizes"},ft=a=>({...Z,...a}),zt=()=>({...Z}),mt={class:"ex-table"},gt={class:"search-comps"},vt={class:"search-btn"},ht={class:"table-container",ref:"tableContainer"},bt={key:1},xt={class:"pagination-container"},Ct=m({name:"ExTable"}),Et=m({...Ct,props:{modelValue:{type:Object,default:()=>ft()}},emits:["update:modelValue"],setup(a,{expose:r,emit:c}){const s=R("table"),d=R("pagination");r({table:s,pagination:d});const e=I(a,"modelValue",c);$e(()=>{});const h=b=>{e.value.height=b.height},C=()=>{l(1)},l=async(b,i)=>{if(console.log("output->获取表格数据"),!e.value.loading){e.value.loading=!0,e.value.currentPage=b||e.value.currentPage,e.value.pageSize=i||e.value.pageSize;try{}catch(p){console.log("请求表格数据失败",p)}finally{e.value.loading=!1}}},$=b=>{l(b)},T=b=>{l(1,b)},O=b=>b+1+(e.value.currentPage-1)*e.value.pageSize;return(b,i)=>{const p=X,o=B,y=ce,x=ue,z=ie,U=Q("size-ob"),ee=re;return q((n(),_("div",mt,[E("div",gt,[g(p,{modelValue:f(e).query,"onUpdate:modelValue":i[0]||(i[0]=V=>f(e).query=V)},null,8,["modelValue"])]),E("div",vt,[g(o,{type:"primary",onClick:C},{default:v(()=>i[2]||(i[2]=[D("搜索")])),_:1})]),q((n(),_("div",ht,[g(x,{data:f(e).tableData,ref_key:"table",ref:s,height:f(e).height},{default:v(()=>[g(y,{type:"selection"}),g(y,{type:"index",label:"序号",width:"60",index:O}),(n(!0),_(k,null,S(f(e).columns,(V,te)=>(n(),w(y,{key:te,prop:V.prop,label:V.label,"show-overflow-tooltip":f(e).showOverflowTooltip},{default:v(({row:H})=>[f(e).colSlots.includes(V.prop)?L(b.$slots,V.prop,{key:0,row:H},void 0,!0):(n(),_("div",bt,M(H[V.prop]),1))]),_:2},1032,["prop","label","show-overflow-tooltip"]))),128))]),_:3},8,["data","height"])])),[[U,h]]),E("div",xt,[g(z,{ref_key:"pagination",ref:d,total:f(e).total,background:f(e).background,layout:f(e).layout,"current-page":f(e).currentPage,"page-size":f(e).pageSize,"onUpdate:pageSize":[i[1]||(i[1]=V=>f(e).pageSize=V),T],"onUpdate:currentPage":$,"page-sizes":f(e).pageSizes},null,8,["total","background","layout","current-page","page-size","page-sizes"])])])),[[ee,f(e).loading]])}}}),$t=F(Et,[["__scopeId","data-v-bbee21af"]]);function Ft(a){const r=Object.assign({"./ExCalendar/index.vue":Ae,"./ExContextMenu/index.vue":Ne,"./ExCreateForm/index.vue":He,"./ExForm/components/ExButtonGroup/index.vue":Je,"./ExForm/components/ExInput/index.vue":We,"./ExForm/components/ExSelect/index.vue":tt,"./ExForm/index.vue":st,"./ExMenu/index.vue":pt,"./ExTable/index.vue":$t});Object.keys(r).map(c=>{const s=c.split("/"),d=s[s.length-2];a.component(d,r[c])})}export{pt as _,Ae as a,Ne as b,He as c,$t as d,zt as g,Ft as s};
