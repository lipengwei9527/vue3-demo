{"version":3,"file":"components.C-toWvmK.js","sources":["../../src/components/ExCalendar/library/date.ts","../../src/components/ExCalendar/index.vue","../../src/components/ExContextMenu/components/FormContext.vue","../../src/components/ExContextMenu/index copy.vue","../../src/components/ExContextMenu/index.vue","../../src/components/ExCreateForm/compsData.ts","../../src/components/ExCreateForm/components/BaseCtrls.vue","../../src/components/ExCreateForm/components/FormFooter.vue","../../src/components/ExForm/DiyContainer.vue","../../src/components/ExForm/index.vue","../../src/components/ExCreateForm/components/FormMain.vue","../../src/components/ExCreateForm/components/FormSideBar.vue","../../src/components/ExCreateForm/components/FormTopBar.vue","../../src/components/ExCreateForm/index.vue","../../src/components/ExDatePicker/index.vue","../../src/components/ExDialog/index.vue","../../src/components/ExDrawer/index.vue","../../src/components/ExForm/DiyInput/index.vue","../../src/components/ExForm/DiySelect/index.vue","../../src/components/ExMenu/components/ExSubMenu.vue","../../src/components/ExMenu/index.vue","../../src/components/ExTable/tableConfig.ts","../../src/components/ExTable/index.vue","../../src/components/index.ts"],"sourcesContent":["import { DayInfo } from \"@/types/components\";\r\nimport moment from \"moment\";\r\nconst showDayNum = 42; // 显示的天数，日历中的格子数\r\n/**\r\n * @description: 获取指定时间的当月天数和星期，默认获取当月的天数和星期\r\n * @param {Date} date \r\n * @param {number} num \r\n  @returns {*} \r\n */\r\nfunction getMonthInfo(\r\n  date: Date | string | number,\r\n  num: number = 0\r\n): { days: number; firstDayOfMonth: number; date: string } {\r\n  // 指定的月份\r\n  date = moment(date).subtract(num, \"month\").format(\"YYYY-MM\");\r\n  const start = moment(date).startOf(\"month\");\r\n  const end = moment(date).endOf(\"month\");\r\n  const days = end.diff(start, \"days\") + 1;\r\n  let firstDayOfMonth = new Date(date).getDay();\r\n  if (firstDayOfMonth === 0) firstDayOfMonth = 7;\r\n  return {\r\n    date, // date: \"2024/10\",// date: 指定的月份\r\n    days, // days: 31,// 月份天数\r\n    firstDayOfMonth, // 2// 当月第一天是周几(1-周一,....7-周日)\r\n  };\r\n}\r\n/**\r\n * @description: 获取当前日历信息\r\n * @param {String} time\r\n * @return {*}\r\n */\r\nexport function getCalendarData(time: string | Date | number): DayInfo[] {\r\n  let date = new Date(time || new Date());\r\n  // 初始化月份信息\r\n  let preMonth = getMonthInfo(date, 1);\r\n  let curMonth = getMonthInfo(date);\r\n  let nextMonth = getMonthInfo(date, -1);\r\n  let calendarData: DayInfo[] = [];\r\n  // 获取上月信息\r\n  for (let i = curMonth.firstDayOfMonth; i > 1; i--) {\r\n    let dayInfo = resetDayInfo();\r\n    dayInfo.day = preMonth.days - i + 2;\r\n    dayInfo.date =\r\n      preMonth.date +\r\n      \"-\" +\r\n      (dayInfo.day < 10 ? \"0\" + dayInfo.day : dayInfo.day);\r\n    dayInfo.type = \"pre\";\r\n    calendarData.push(dayInfo);\r\n  }\r\n  // 获取当月信息\r\n  for (let i = 0; i < curMonth.days; i++) {\r\n    let dayInfo = resetDayInfo();\r\n    dayInfo.day = i + 1;\r\n    dayInfo.date =\r\n      curMonth.date +\r\n      \"-\" +\r\n      (dayInfo.day < 10 ? \"0\" + dayInfo.day : dayInfo.day);\r\n    dayInfo.type = \"cur\";\r\n    calendarData.push(dayInfo);\r\n  }\r\n  // 获取下月信息\r\n  for (\r\n    let i = 1;\r\n    i < showDayNum - curMonth.days - curMonth.firstDayOfMonth + 2;\r\n    i++\r\n  ) {\r\n    let dayInfo = resetDayInfo();\r\n    dayInfo.day = i;\r\n    dayInfo.date =\r\n      nextMonth.date +\r\n      \"-\" +\r\n      (dayInfo.day < 10 ? \"0\" + dayInfo.day : dayInfo.day);\r\n    dayInfo.type = \"next\";\r\n    calendarData.push(dayInfo);\r\n  }\r\n  return calendarData;\r\n}\r\n// 初始化日历当天所包含的信息\r\nexport function resetDayInfo(): DayInfo {\r\n  return {\r\n    day: 0,\r\n    date: \"\",\r\n    type: \"\",\r\n    disabled: false,\r\n  };\r\n}\r\n","<script lang=\"ts\">\nimport { defineComponent } from 'vue'\nexport default defineComponent({\n  name: 'ExCalendar',\n})\n</script>\n<template>\r\n  <div class=\"ex-calendar\">\r\n    <div>\r\n      <el-button type=\"primary\" @click=\"changeModelValue(1)\">上月</el-button>\r\n      <el-button type=\"primary\" @click=\"changeModelValue(-1)\">下月</el-button>\r\n    </div>\r\n    <div class=\"calendar-head\">{{ modelValue }}</div>\r\n    <table class=\"ex-calendar-table\">\r\n      <thead>\r\n        <th v-for=\"item in weeks\" class=\"week-item\">{{ item }}</th>\r\n      </thead>\r\n      <tbody>\r\n        <tr v-for=\"trItem in calendarData\">\r\n          <td v-for=\"tdItem in trItem\">\r\n            <div\r\n              :class=\"setCalendarItemClass(tdItem)\"\r\n              @click=\"selectDayFn(tdItem)\"\r\n            >\r\n              <div v-if=\"Object.keys(slots).length == 0\">\r\n                {{ tdItem.day }}\r\n              </div>\r\n              <slot v-else :data=\"tdItem\"></slot>\r\n            </div>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n</template>\r\n<script name=\"ExCalendar\" setup lang=\"ts\">\r\nimport { reactive, useSlots, PropType } from \"vue\";\r\nimport { useVModel } from \"@vueuse/core\";\r\nimport { formateDate } from \"@/utils/date\";\r\nimport moment from \"moment\";\r\nimport { getCalendarData } from \"./library/date\";\r\nimport { DayInfo } from \"@/types/components\";\r\n// 父组件中使用插槽即使是注释也会返回一个包含default属性的对象\r\n// 不使用插槽时要保证父组件插槽位置不能有任何东西（注释也不行）\r\nconst slots = useSlots();\r\nconst props = defineProps({\r\n  // 要展示的月份的时间\r\n  modelValue: {\r\n    type: [Date, String],\r\n    default: () => new Date(),\r\n  },\r\n  // 禁止选择的开始时间\r\n  startTime: {\r\n    type: [String, Date],\r\n    default: \"\",\r\n  },\r\n  // 可以选的的时间段中不可选择的时间\r\n  banTime: {\r\n    type: Array as PropType<string[]>,\r\n    default: () => [],\r\n  },\r\n  // 禁止选择的结束时间\r\n  endTime: {\r\n    type: [String, Date],\r\n    default: \"\",\r\n  },\r\n});\r\n\r\nconst emits = defineEmits([\"select\", \"update:modelValue\"]);\r\nlet modelValue = useVModel(props, \"modelValue\", emits);\r\n\r\nconst weeks = [\"一\", \"二\", \"三\", \"四\", \"五\", \"六\", \"日\"];\r\nconst selected = reactive<DayInfo[]>([]);\r\n// 要渲染的日历数据\r\nlet calendarData = reactive<DayInfo[][]>([]);\r\nconst setCalendarItemClass = (item: DayInfo) => {\r\n  return {\r\n    \"calendar-item\": true,\r\n    \"pre-month\": item.type == \"pre\",\r\n    \"next-month\": item.type == \"next\",\r\n    allow: !isBanFn(item),\r\n    ban: isBanFn(item),\r\n    selected: isSelectedFn(item),\r\n  };\r\n};\r\nconst toTreeCalendarData = (data: DayInfo[]) => {\r\n  const tempData: DayInfo[][] = [];\r\n  let tempItem: DayInfo[] = [];\r\n  data.forEach((item, index) => {\r\n    tempItem.push(item);\r\n    if ((index + 1) % 7 == 0) {\r\n      tempData.push(tempItem);\r\n      tempItem = [];\r\n    }\r\n  });\r\n  return tempData;\r\n};\r\nconst changeModelValue = (\r\n  value: number = 0,\r\n  type: moment.DurationInputArg2 = \"month\"\r\n) => {\r\n  // modelValue.value月份的往前或往后value时间的月份\r\n  const date = formateDate(\r\n    moment(modelValue.value).subtract(value, type).toString(),\r\n    \"YYYY-MM\"\r\n  );\r\n  modelValue.value = date;\r\n  calendarData.length = 0;\r\n  calendarData.push(...toTreeCalendarData(getCalendarData(date)));\r\n};\r\nchangeModelValue();\r\n\r\n// 该日是否不可选择\r\nconst isBanFn = (data: DayInfo): boolean => {\r\n  let time = new Date(data.date).getTime();\r\n  let start = new Date(props.startTime).getTime();\r\n  let end = new Date(props.endTime).getTime();\r\n  let isHaving = props.banTime.find((item) => new Date(item).getTime() == time);\r\n  if (time <= start || time >= end || isHaving) {\r\n    data.disabled = true;\r\n    return true;\r\n  }\r\n  return false;\r\n};\r\n\r\n// 判断该日期是否选中\r\nconst isSelectedFn = (data: DayInfo): boolean => {\r\n  if (selected.find((item) => item.date == data.date)) {\r\n    return true;\r\n  }\r\n  return false;\r\n};\r\n// 选择点击的日期\r\nconst selectDayFn = (data: DayInfo) => {\r\n  console.log(`output-selectDayFn>`);\r\n  if (!data || data.disabled) return;\r\n  if (selected.length != 0 && selected.find((item) => item.date == data.date)) {\r\n    selected.length = 0;\r\n    return;\r\n  }\r\n  selected.length = 0;\r\n  selected.push(data);\r\n  emits(\"select\", selected);\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@mixin border {\r\n  border-top: 1px solid var(--el-border-color);\r\n  border-left: 1px solid var(--el-border-color);\r\n}\r\n// hover及选中的样式\r\n@mixin hover_and_selected() {\r\n  z-index: 10;\r\n  background-color: #ecf5ff;\r\n  color: #79bbff;\r\n  border-color: #79bbff;\r\n}\r\n.ex-calendar {\r\n  user-select: none;\r\n  display: grid;\r\n  grid-template-rows: auto auto 1fr;\r\n  .ex-calendar-table {\r\n    border-collapse: collapse;\r\n    border: 1px solid var(--el-border-color);\r\n    table-layout: fixed;\r\n    height: 100%;\r\n    width: 100%;\r\n    thead {\r\n      th {\r\n        padding: 12px 0;\r\n        @include border();\r\n      }\r\n    }\r\n    tbody {\r\n      tr {\r\n        td {\r\n          @include border();\r\n          .calendar-item {\r\n            height: 100%;\r\n            overflow: scroll;\r\n            cursor: pointer;\r\n            padding: 8px;\r\n            &::-webkit-scrollbar {\r\n              width: 4px;\r\n              height: 4px;\r\n              padding: 0 4px;\r\n            }\r\n          }\r\n          .pre-month,\r\n          .next-month {\r\n            color: #999;\r\n          }\r\n          // 允许选择的hover样式\r\n          .allow:hover {\r\n            @include hover_and_selected();\r\n          }\r\n          // 选中的样式\r\n          .selected {\r\n            @include hover_and_selected();\r\n          }\r\n          // 禁止选择的样式\r\n          .ban {\r\n            background-color: #f4f4f5;\r\n            cursor: not-allowed;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"form-context\">\r\n    <div></div>\r\n  </div>\r\n</template>\r\n<script name=\"FormContext\" setup lang=\"ts\"></script>\r\n<style lang=\"scss\" scoped></style>\r\n","<script lang=\"ts\">\nimport { defineComponent } from 'vue'\nexport default defineComponent({\n  name: 'ExContextMenu',\n})\n</script>\n<template>\r\n  <div ref=\"containerRef\" class=\"ex-context-menu\">\r\n    <Teleport to=\"body\">\r\n      <Transition\r\n        @before-enter=\"handleBeforeEnter\"\r\n        @enter=\"handleEnter\"\r\n        @after-enter=\"handleAfterEnter\"\r\n      >\r\n        <div>\r\n          <div\r\n            v-size-ob=\"handleSizeChange\"\r\n            class=\"menus\"\r\n            v-if=\"showMenu\"\r\n            :style=\"{\r\n              left: pos.posX + 'px',\r\n              top: pos.posY + 'px',\r\n            }\"\r\n          >\r\n            <div\r\n              class=\"menu-item\"\r\n              @click=\"handleMenuItem(item)\"\r\n              v-for=\"item in list\"\r\n            >\r\n              {{ item.label }}\r\n            </div>\r\n            <slot></slot>\r\n          </div>\r\n        </div>\r\n      </Transition>\r\n    </Teleport>\r\n  </div>\r\n</template>\r\n\r\n<script setup name=\"ExContextMenu\" lang=\"ts\">\r\n/**\r\n * 鼠标左键菜单组件\r\n * @param list 参列表\r\n * @event select(item) 返回menu的item\r\n */\r\nimport { ref, computed, PropType } from \"vue\";\r\nimport useContextMenu from \"@/hooks/useContextMenu\";\r\nimport useViewPort from \"@/hooks/useViewPort\";\r\ntype ListItem = { label: string; value: any } & Record<string, any>;\r\ndefineProps({\r\n  list: {\r\n    type: Array as PropType<ListItem[]>,\r\n    default: () => [],\r\n  },\r\n});\r\nconst slots = defineSlots();\r\nconsole.log(\"slots\", slots);\r\n// 视口的宽和高\r\nconst { vw, vh } = useViewPort();\r\nconst containerRef = ref();\r\n// x-鼠标点击位置距离视口左边的距离,y-鼠标点击位置距离视口顶部的距离,showMenu-是否显示菜单\r\nconst { x, y, showMenu } = useContextMenu(containerRef);\r\nconst emit = defineEmits([\"select\"]);\r\n\r\n// 菜单的宽和高\r\nconst w = ref(0);\r\nconst h = ref(0);\r\nfunction handleSizeChange(rect: Parameters<Rect>[0]) {\r\n  const { width, height } = rect;\r\n  w.value = width;\r\n  h.value = height;\r\n}\r\n// 菜单最终显示位置\r\nconst pos = computed(() => {\r\n  // posX,posY-菜单最终显示的x,y坐标\r\n  let posX = x.value;\r\n  let posY = y.value;\r\n  // 视口宽度-鼠标位置>菜单宽度:菜单需要显示在鼠标左边\r\n  if (posX > vw.value - w.value) {\r\n    posX -= w.value;\r\n  }\r\n  // 视口高度-鼠标位置<菜单高度:菜单需要往上移\r\n  if (vh.value - posY < h.value) {\r\n    posY = vh.value - h.value;\r\n  }\r\n  return {\r\n    posX,\r\n    posY,\r\n  };\r\n});\r\n\r\n// 点击菜单item\r\nfunction handleMenuItem<T>(item: T) {\r\n  showMenu.value = false;\r\n  emit(\"select\", item);\r\n}\r\n// 元素加入到页面之前\r\nfunction handleBeforeEnter(el: Element) {\r\n  if (!(el instanceof HTMLElement)) return;\r\n  el.style.height = \"0\";\r\n}\r\n// 元素加入到页面之后\r\nfunction handleEnter(el: Element) {\r\n  if (!(el instanceof HTMLElement)) return;\r\n  el.style.height = \"auto\";\r\n  const h = el.clientHeight;\r\n  el.style.height = \"0\";\r\n  requestAnimationFrame(() => {\r\n    el.style.height = h + \"px\";\r\n    el.style.transition = \"0.5s\";\r\n  });\r\n}\r\n// 离开之后\r\nfunction handleAfterEnter(el: any) {\r\n  el.style.transition = \"none\";\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.menus {\r\n  position: fixed;\r\n  background-color: #eee;\r\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);\r\n  min-width: 200px;\r\n  border-radius: 5px;\r\n  font-size: 12px;\r\n  color: #1d1d1f;\r\n  overflow: hidden;\r\n  cursor: pointer;\r\n  padding: 5px;\r\n}\r\n\r\n.menu-item {\r\n  border-radius: 5px;\r\n  padding: 3px 5px;\r\n}\r\n\r\n.menu-item:hover {\r\n  background-color: #a0cfff;\r\n}\r\n\r\n// .v-enter-from {\r\n//   opacity: 1;\r\n// }\r\n\r\n// .v-enter-to {\r\n//   transition: 0.5;\r\n//   opacity: 0;\r\n// }\r\n</style>\r\n","<script lang=\"ts\">\nimport { defineComponent } from 'vue'\nexport default defineComponent({\n  name: 'ExContentMenu',\n})\n</script>\n<template>\r\n  <div class=\"context-container\" ref=\"targetRef\">\r\n    <slot></slot>\r\n    <Teleport to=\"body\">\r\n      <Transition\r\n        @before-enter=\"handleBeforeEnter\"\r\n        @enter=\"handleEnter\"\r\n        @after-enter=\"handleAfterEnter\"\r\n        name=\"fade\"\r\n        mode=\"out-in\"\r\n      >\r\n        <div\r\n          v-size-ob=\"handleSizeChange\"\r\n          v-if=\"modelShow\"\r\n          class=\"menu\"\r\n          :style=\"{\r\n            width: pos.width,\r\n            left: pos.posX,\r\n            top: pos.posY,\r\n          }\"\r\n        >\r\n          <div class=\"item\" v-for=\"item in list\" @click=\"selectFn(item)\">\r\n            {{ item.label }}\r\n          </div>\r\n        </div>\r\n      </Transition>\r\n    </Teleport>\r\n  </div>\r\n</template>\r\n<script name=\"ExContentMenu\" setup lang=\"ts\">\r\nimport {\r\n  defineProps,\r\n  PropType,\r\n  ref,\r\n  computed,\r\n  onBeforeUnmount,\r\n  onMounted,\r\n} from \"vue\";\r\nimport useViewPort from \"@/hooks/useViewPort\";\r\nimport { useVModel } from \"@vueuse/core\";\r\nimport { DoneFn } from \"@/types/elementPlus\";\r\nimport { hasEvent } from \"@/utils/guard\";\r\ntype List = ({ label: string; value: any } & Record<string, any>)[];\r\nconst props = defineProps({\r\n  isShow: {\r\n    type: Boolean,\r\n  },\r\n  list: {\r\n    type: Array as PropType<List>,\r\n  },\r\n\r\n  width: {\r\n    type: Number,\r\n    default: 200,\r\n  },\r\n  // beforeClose: {\r\n  //   type: Function as PropType<DialogBeforeCloseFn>,\r\n  // },\r\n  // select: {\r\n  //   type: Function as PropType<(item: List[number]) => void>,\r\n  // },\r\n});\r\nconst emits = defineEmits<{\r\n  (e: \"update:isShow\", value: boolean): void;\r\n  (e: \"select\", value: List[number]): void;\r\n  (e: \"close\", value: boolean): void;\r\n  (e: \"beforeClose\", item: List[number], value: DoneFn): void;\r\n}>();\r\nconst modelShow = props.isShow ? useVModel(props, \"isShow\", emits) : ref(false);\r\n\r\nconst eventRes = hasEvent([\"onBeforeClose\", \"onSelect\"]);\r\n// 触发一次beforeClose事件flag置为true，调用一次beforeFn置为false\r\nlet isHidden = ref<boolean | undefined>(false);\r\n/**\r\n * @description beforeClose事件传递的函数\r\n * @param cancel\r\n */\r\nconst beforeFn = (hidden?: boolean) => {\r\n  isHidden.value = hidden;\r\n  closeFn();\r\n};\r\n/**\r\n * @description 被菜单项、window的click和contextMenu事件监听\r\n */\r\nconst selectFn = (item: List[number]) => {\r\n  // 点击左键菜单外的其他部分\r\n  if (!item) {\r\n    closeFn();\r\n    return;\r\n  }\r\n  // 是否有关闭前的其他操作\r\n  if (eventRes.find((item) => item.name == \"onBeforeClose\")?.result) {\r\n    isHidden.value = true;\r\n    emits(\"beforeClose\", item, beforeFn);\r\n    return;\r\n  }\r\n  emits(\"select\", item);\r\n  closeFn();\r\n  // 选中菜单并立即关闭\r\n  // if (eventRes.find((item) => item.name == \"onSelect\")) {\r\n  //   emits(\"select\", item);\r\n  //   closeFn();\r\n  //   return;\r\n  // }\r\n};\r\n/**\r\n * 关闭菜单\r\n */\r\nconst closeFn = () => {\r\n  if (isHidden.value) return;\r\n  removeEventListener(\"click\", closeFn, true);\r\n  removeEventListener(\"contextmenu\", closeFn, true);\r\n  modelShow.value = false;\r\n};\r\nlet mouseX = ref(0);\r\nlet mouseY = ref(0);\r\n/**\r\n * @description 打开菜单\r\n * @param\r\n */\r\nconst openContextMenu = (e: PointerEvent) => {\r\n  e.preventDefault();\r\n  e.stopPropagation();\r\n  // 同步监听全局click和contextMenu事件\r\n  // 除本身外的其他菜单全部关闭\r\n  addEventListener(\"click\", closeFn);\r\n  addEventListener(\"contextmenu\", closeFn, true);\r\n  mouseX.value = e.clientX;\r\n  mouseY.value = e.clientY;\r\n  modelShow.value = true;\r\n};\r\n\r\n// 浏览器可视区域的宽和高\r\nlet { vw, vh } = useViewPort();\r\n/**\r\n *@description 确定菜单在可视区域的什么位置渲染\r\n */\r\nconst pos = computed(() => {\r\n  // 菜单左上角所处位置\r\n  let posX = mouseX.value;\r\n  let posY = mouseY.value;\r\n  let width = props.width > w.value ? props.width : w.value;\r\n  let height = h.value;\r\n  // 视口宽度-鼠标位置>菜单宽度，菜单位置左移\r\n  if (vw.value - mouseX.value < width) {\r\n    posX = mouseX.value - width;\r\n  }\r\n  // 视口高度-鼠标高度<菜单高度，菜单上移\r\n  if (vh.value - mouseY.value < height) {\r\n    posY = mouseY.value - height;\r\n  }\r\n  return {\r\n    width: width + \"px\",\r\n    height: height + \"px\",\r\n    posX: posX + \"px\",\r\n    posY: posY + \"px\",\r\n  };\r\n});\r\nconst targetRef = ref();\r\n\r\nonMounted(() => {\r\n  targetRef.value.addEventListener(\"contextmenu\", openContextMenu);\r\n});\r\n\r\nonBeforeUnmount(() => {\r\n  targetRef.value.removeEventListener(\"contextmenu\", openContextMenu);\r\n  closeFn();\r\n});\r\n// 菜单高度\r\nlet h = ref(0);\r\nlet w = ref(0);\r\nfunction handleSizeChange(rect: Parameters<Rect>[0]) {\r\n  const { width, height } = rect;\r\n  w.value = width;\r\n  h.value = height;\r\n}\r\n// 元素加入到页面之前\r\nfunction handleBeforeEnter(el: Element) {\r\n  if (!(el instanceof HTMLElement)) return;\r\n  el.style.height = \"0\";\r\n}\r\n// 元素加入到页面之后\r\nfunction handleEnter(el: Element) {\r\n  if (!(el instanceof HTMLElement)) return;\r\n  el.style.height = \"auto\";\r\n  const height = el.clientHeight;\r\n  h.value = height;\r\n  // el.style.height = \"0\";\r\n  // requestAnimationFrame(() => {\r\n  //   el.style.height = height + \"px\";\r\n  //   el.style.transition = \"0.3s\";\r\n  // });\r\n}\r\n// 离开之后\r\nfunction handleAfterEnter(el: any) {\r\n  el.style.transition = \"none\";\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.menu {\r\n  position: fixed;\r\n  z-index: 100;\r\n  background-color: #fff;\r\n  border: 1px solid #c9c6c6;\r\n  padding: 5px;\r\n  border-radius: 7px;\r\n  box-shadow: 1px 3px 10px -2px rgb(163, 164, 167);\r\n  overflow: hidden;\r\n  box-sizing: border-box;\r\n  .item {\r\n    cursor: pointer;\r\n    padding: 3px;\r\n    border-radius: 3px;\r\n    user-select: none;\r\n    &:hover {\r\n      background-color: #c9ccd0;\r\n      opacity: 0.8;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import {\r\n  UnionCtrlType,\r\n  DiyContainerType,\r\n  DiyFormItemType,\r\n} from \"@/types/components\";\r\nimport { AutoId } from \"@/utils/general\";\r\nexport const autoId = new AutoId();\r\n// export type CompsCfg = {\r\n//   DiyContainer: () => DiyContainerType;\r\n//   DiyInput: () => DiyFormItemType;\r\n//   DiySelect: () => DiyFormItemType;\r\n//   DiyDatePicker: () => DiyFormItemType;\r\n// };\r\n// type CompsCfgType = {\r\n//   [P in UnionCtrlType]: () => DiyContainerType | DiyFormItemType;\r\n// };\r\n/**\r\n * @description 获取初始化的控件信息\r\n * @param compName 控件名称\r\n * @returns\r\n */\r\nexport type Ctrls = {\r\n  id: number | string;\r\n  title: string;\r\n  ctrls: (DiyContainerType | DiyFormItemType)[];\r\n}[];\r\nexport const allCtrls: Ctrls = [\r\n  { id: 1, title: \"容器\", ctrls: [getInitCompData(\"DiyContainer\")] },\r\n  {\r\n    id: 2,\r\n    title: \"基本表单控件\",\r\n    ctrls: [\r\n      getInitCompData(\"DiyInput\"),\r\n      getInitCompData(\"DiySelect\"),\r\n      getInitCompData(\"DiyDatePicker\"),\r\n    ],\r\n  },\r\n];\r\nexport function getInitCompData(compName: UnionCtrlType) {\r\n  const compsCfg = {\r\n    DiyContainer: getContainerCfg,\r\n    DiyInput: getInputCfg,\r\n    DiySelect: getSelectCfg,\r\n    DiyDatePicker: getDiyDatePickerCfg,\r\n  };\r\n  return compsCfg[compName]();\r\n}\r\n\r\nfunction getContainerCfg(): DiyContainerType {\r\n  const id = autoId.next();\r\n  if (!id) ctrlIdError(\"DiyContainer\");\r\n  const DiyContainer: DiyContainerType = {\r\n    id: id,\r\n    label: \"标题\" + id,\r\n    type: \"DiyContainer\",\r\n    typeName: \"容器\",\r\n    config: [],\r\n  };\r\n  return DiyContainer;\r\n}\r\nfunction getFormItemCfg(): Omit<DiyFormItemType, \"compCfg\"> {\r\n  const id = autoId.next();\r\n  if (!id) ctrlIdError(\"DiyFormItem\");\r\n  return {\r\n    id,\r\n    type: \"DiyInput\",\r\n    typeName: \"\",\r\n    label: \"字段\" + id,\r\n    prop: \"\",\r\n    isFullLine: true,\r\n  };\r\n}\r\nfunction getInputCfg(): DiyFormItemType {\r\n  //   const id = autoId.next();\r\n  //   if (!id) ctrlIdError(\"DiyInput\");\r\n  const fromItem = getFormItemCfg();\r\n  return {\r\n    ...fromItem,\r\n    type: \"DiyInput\",\r\n    typeName: \"输入框\",\r\n    compCfg: {\r\n      value: \"\",\r\n    },\r\n  };\r\n}\r\nfunction getSelectCfg(): DiyFormItemType {\r\n  //   const id = autoId.next();\r\n  //   if (!id) ctrlIdError(\"DiySelect\");\r\n  const fromItem = getFormItemCfg();\r\n  return {\r\n    ...fromItem,\r\n    type: \"DiySelect\",\r\n    typeName: \"选择器\",\r\n    compCfg: {\r\n      value: \"\",\r\n    },\r\n  };\r\n}\r\nfunction getDiyDatePickerCfg(): DiyFormItemType {\r\n  const fromItem = getFormItemCfg();\r\n  return {\r\n    ...fromItem,\r\n    type: \"DiyDatePicker\",\r\n    typeName: \"日期选择器\",\r\n    compCfg: {\r\n      value: \"\",\r\n    },\r\n  };\r\n}\r\nfunction ctrlIdError(str: string) {\r\n  throw new Error(`初始化${str}控件id为空`);\r\n}\r\n","<script lang=\"ts\">\nimport { defineComponent } from 'vue'\nexport default defineComponent({\n  name: 'BaseCtrls',\n})\n</script>\n<template>\r\n  <div class=\"ctrls\" ref=\"ctrlsRef\">\r\n    <div class=\"ctrl-item\" v-for=\"item in ctrls\" :key=\"item.id\">\r\n      {{ item.typeName }}\r\n      <slot></slot>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script name=\"BaseCtrls\" setup lang=\"ts\">\r\nimport { defineProps, defineEmits, PropType, ref } from \"vue\";\r\nimport { useVModel } from \"@vueuse/core\";\r\nimport { useDraggable } from \"vue-draggable-plus\";\r\nimport type { DiyContainerType, DiyFormItemType } from \"@/types/components\";\r\nimport { getInitCompData } from \"../compsData\";\r\n// const slots = defineSlots();\r\n// console.log(\"slots\", Object.keys(slots));\r\nconst props = defineProps({\r\n  ctrls: {\r\n    type: Array as PropType<(DiyContainerType | DiyFormItemType)[]>,\r\n  },\r\n});\r\nconst emits = defineEmits<{\r\n  (e: \"update:ctrls\", value: (DiyContainerType | DiyFormItemType)[]): void;\r\n}>();\r\nconst list = useVModel(props, \"ctrls\", emits);\r\nconst ctrlsRef = ref(null);\r\nuseDraggable(ctrlsRef, list, {\r\n  animation: 200,\r\n  group: {\r\n    name: \"main\",\r\n    pull: \"clone\",\r\n    put: false,\r\n  },\r\n  sort: false,\r\n  clone(ctrl) {\r\n    const type = ctrl.type;\r\n    return getInitCompData(type);\r\n  },\r\n});\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n// 递归组件最底层的组件的样式\r\n.ctrls {\r\n  display: grid;\r\n  grid-template-columns: repeat(2, 1fr);\r\n  gap: 7px;\r\n  .ctrl-item {\r\n    // grid-column: 1 / -1;\r\n    cursor: move;\r\n    user-select: none;\r\n    text-align: center;\r\n    padding: 3px;\r\n    border: 1px solid red;\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"form-footer\"></div>\r\n</template>\r\n<script name=\"FormFooter\" setup lang=\"ts\"></script>\r\n<style lang=\"scss\" scoped></style>\r\n","<script lang=\"ts\">\nimport { defineComponent } from 'vue'\nexport default defineComponent({\n  name: 'DiyContainer',\n})\n</script>\n<template>\r\n  <div class=\"diy-container\" ref=\"diyContainer\">\r\n    <div class=\"container-item\" v-for=\"(item, _index) in config\" :key=\"item.id\">\r\n      <ExContextMenu @select=\"selectContext\" :list=\"contextList\">\r\n        <h3 v-if=\"item.type == 'DiyContainer'\" class=\"title full-line\">\r\n          {{ item.label }}\r\n        </h3>\r\n        <el-form-item\r\n          :class=\"{ 'full-line': item.isFullLine }\"\r\n          v-if=\"item.type != 'DiyContainer'\"\r\n          :label=\"item.label\"\r\n          :prop=\"item.prop\"\r\n        >\r\n          <component :is=\"item.type\" :config=\"item.compCfg\"></component>\r\n        </el-form-item>\r\n        <DiyContainer\r\n          v-if=\"item.type == 'DiyContainer'\"\r\n          v-model:config=\"item.config\"\r\n        >\r\n        </DiyContainer>\r\n      </ExContextMenu>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script name=\"DiyContainer\" setup lang=\"ts\">\r\nimport { defineProps, defineEmits, PropType, ref } from \"vue\";\r\nimport { useVModel } from \"@vueuse/core\";\r\nimport { useDraggable } from \"vue-draggable-plus\";\r\nimport { DiyContainerType, DiyFormItemType } from \"@/types/components\";\r\nconst contextList = [\r\n  { label: \"菜单1\", value: \"1\" },\r\n  { label: \"菜单2\", value: \"2\" },\r\n];\r\n/**\r\n * 左键点击容器或表单组件\r\n */\r\nconst selectContext = (item: any) => {\r\n  console.log(\"带年纪\", item);\r\n};\r\nconst props = defineProps({\r\n  config: {\r\n    type: Array as PropType<(DiyContainerType | DiyFormItemType)[]>,\r\n    // required: true,\r\n  },\r\n  formData: Object,\r\n});\r\nconst emits = defineEmits<{\r\n  (e: \"update:config\", value: DiyContainerType[]): void;\r\n}>();\r\nconst conCfg = useVModel(props, \"config\", emits);\r\nconst diyContainer = ref();\r\nuseDraggable(diyContainer, conCfg, {\r\n  animation: 200,\r\n  group: \"main\",\r\n  onStart(value) {\r\n    console.log(\"diyContainer:start\", value);\r\n  },\r\n  onEnd(value) {\r\n    console.log(\"diyContainer:end\", value);\r\n  },\r\n});\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.diy-container {\r\n  //容器交换需要鼠标在容器上，padding扩大容器让鼠标能够放到容器上\r\n  padding: 20px 0; //必须的属性\r\n  // border: 1px dashed red;\r\n  grid-column: 1 / -1;\r\n  margin: 10px;\r\n  .container-item {\r\n    display: grid;\r\n    grid-template-columns: repeat(2, 1fr);\r\n    grid-column: 1 / -1;\r\n    border: 1px dashed blue;\r\n    // margin: 10px;\r\n  }\r\n  .title {\r\n    user-select: none;\r\n    cursor: move;\r\n  }\r\n  .full-line {\r\n    grid-column: 1 / -1;\r\n  }\r\n}\r\n</style>\r\n","<script lang=\"ts\">\nimport { defineComponent } from 'vue'\nexport default defineComponent({\n  name: 'ExForm',\n})\n</script>\n<template>\r\n  <div class=\"ex-form\">\r\n    <!-- :model=\"formData\" -->\r\n    <el-form class=\"form-container\" ref=\"formContainer\">\r\n      <!-- @submit.prevent=\"submitFn\" -->\r\n      <DiyContainer v-model:config=\"formCfg\"></DiyContainer>\r\n    </el-form>\r\n    <!-- <div class=\"ex-form-btn\">\r\n      <el-button @click=\"submitFn\" type=\"primary\">提交</el-button>\r\n    </div> -->\r\n  </div>\r\n</template>\r\n<script name=\"ExForm\" setup lang=\"ts\">\r\nimport { defineProps, PropType } from \"vue\";\r\nimport type { DiyContainerType } from \"@/types/components\";\r\nimport { useVModel } from \"@vueuse/core\";\r\n\r\nconst props = defineProps({\r\n  formConfig: Object as PropType<DiyContainerType[]>,\r\n  default: () => [{ config: [] }],\r\n});\r\nconst emits = defineEmits<{\r\n  (e: \"update:formConfig\"): void;\r\n}>();\r\nconst formCfg = useVModel(props, \"formConfig\", emits);\r\n// type FormData = Record<string, any>;\r\n\r\n// const emitChangeFn = (e: any) => {\r\n//   console.log(`output->change`, e);\r\n// };\r\n// const submitFn = () => {\r\n//   console.log(`output->提交`, formData);\r\n// };\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.ex-form {\r\n  height: 100%;\r\n  overflow: auto;\r\n}\r\n</style>\r\n","<script lang=\"ts\">\nimport { defineComponent } from 'vue'\nexport default defineComponent({\n  name: 'FormMain',\n})\n</script>\n<template>\r\n  <div class=\"form-main\">\r\n    <ExForm v-model:formConfig=\"formCfg\"></ExForm>\r\n  </div>\r\n</template>\r\n<script name=\"FormMain\" setup lang=\"ts\">\r\nimport { defineProps, PropType, ref } from \"vue\";\r\nimport { DiyContainerType } from \"@/types/components\";\r\nconst props = defineProps({\r\n  formConfig: {\r\n    type: Array as PropType<DiyContainerType[]>,\r\n    required: true,\r\n  },\r\n});\r\n// const emits = defineEmits<{\r\n//   (e: \"update:formConfig\"): void;\r\n// }>();\r\n// const formCfg = useVModel(props, \"formConfig\", emits);\r\nconst formCfg = ref<DiyContainerType[]>(props.formConfig);\r\n</script>\r\n<style lang=\"scss\" scoped></style>\r\n","<script lang=\"ts\">\nimport { defineComponent } from 'vue'\nexport default defineComponent({\n  name: 'FormSideBar',\n})\n</script>\n<template>\r\n  <div class=\"form-side-bar\">\r\n    <div class=\"ctrls-container\" v-for=\"item in ctrls\">\r\n      <h4 class=\"title\">{{ item.title }}</h4>\r\n      <BaseCtrls v-model:ctrls=\"item.ctrls\"></BaseCtrls>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script name=\"FormSideBar\" setup lang=\"ts\">\r\nimport { defineProps, PropType } from \"vue\";\r\nimport BaseCtrls from \"./BaseCtrls.vue\";\r\nimport { Ctrls } from \"../compsData\";\r\ndefineProps({\r\n  ctrls: {\r\n    type: Array as PropType<Ctrls>,\r\n    required: true,\r\n  },\r\n});\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.form-side-bar {\r\n  padding: 10px;\r\n  .title {\r\n    margin: 10px;\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"form-top-bar\"></div>\r\n</template>\r\n<script name=\"FormTopBar\" setup lang=\"ts\"></script>\r\n<style lang=\"scss\" scoped></style>\r\n","<script lang=\"ts\">\nimport { defineComponent } from 'vue'\nexport default defineComponent({\n  name: 'ExCreateForm',\n})\n</script>\n<template>\r\n  <div class=\"ex-create-form\">\r\n    <FormTopBar></FormTopBar>\r\n    <FormSideBar :ctrls=\"ctrls\"></FormSideBar>\r\n    <!-- <FormMain></FormMain> -->\r\n    <FormMain :formConfig=\"cfg\"></FormMain>\r\n    <FormFooter></FormFooter>\r\n  </div>\r\n</template>\r\n<script name=\"ExCreateForm\" setup lang=\"ts\">\r\nimport { ref } from \"vue\";\r\nimport FormSideBar from \"./components/FormSideBar.vue\";\r\nimport FormTopBar from \"./components/FormTopBar.vue\";\r\nimport FormMain from \"./components/FormMain.vue\";\r\nimport FormFooter from \"./components/FormFooter.vue\";\r\nimport { Ctrls, allCtrls, getInitCompData, autoId } from \"./compsData\";\r\nimport { DiyContainerType } from \"@/types/components\";\r\nconst ctrls = ref<Ctrls>(allCtrls);\r\nautoId.cur = 0;\r\nconst cfg = [getInitCompData(\"DiyContainer\") as DiyContainerType];\r\n</script>\r\n\r\n<style lang=\"scss\" scoped></style>\r\n","<template>\r\n  <div class=\"ex-date-picker\">自定义时间组件</div>\r\n</template>\r\n<script name=\"ExDatePicker\" setup lang=\"ts\"></script>\r\n<style lang=\"scss\" scoped></style>\r\n","<script lang=\"ts\">\nimport { defineComponent } from 'vue'\nexport default defineComponent({\n  name: 'ExDialog',\n})\n</script>\n<template>\r\n  <div class=\"ex-dialog\">\r\n    <el-dialog\r\n      :model-value=\"visiable\"\r\n      title=\"Tips\"\r\n      width=\"500\"\r\n      :before-close=\"beforeCloseFn\"\r\n    >\r\n      <span>This is a message</span>\r\n      <template #footer>\r\n        <div class=\"dialog-footer\">\r\n          <el-button @click=\"modelVisiable = false\">Cancel</el-button>\r\n          <el-button type=\"primary\" @click=\"modelVisiable = false\">\r\n            Confirm\r\n          </el-button>\r\n        </div>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script name=\"ExDialog\" setup lang=\"ts\">\r\nimport { DoneFn } from \"@/types/elementPlus\";\r\nimport { useVModel } from \"@vueuse/core\";\r\nimport { defineProps, defineEmits } from \"vue\";\r\nconst props = defineProps({\r\n  visiable: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n});\r\nconst emits = defineEmits<{\r\n  (e: \"update:visiable\"): void;\r\n  (e: \"beforeClose\", value: DoneFn): void;\r\n}>();\r\nconst modelVisiable = useVModel(props, \"visiable\", emits);\r\nconst beforeCloseFn = (doneFn: DoneFn) => {\r\n  emits(\"beforeClose\", doneFn);\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped></style>\r\n","<script lang=\"ts\">\nimport { defineComponent } from 'vue'\nexport default defineComponent({\n  name: 'ExDrawer',\n})\n</script>\n<template>\r\n  <div class=\"ex-drawer\">\r\n    <el-drawer v-model=\"modelValue\" :direction=\"direction\"> </el-drawer>\r\n  </div>\r\n</template>\r\n<script name=\"ExDrawer\" setup lang=\"ts\">\r\nimport { useVModel } from \"@vueuse/core\";\r\nimport { defineProps, PropType } from \"vue\";\r\nconst props = defineProps({\r\n  modelValue: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n  direction: {\r\n    type: String as PropType<\"rtl\" | \"ltr\" | \"ttb\" | \"btt\">,\r\n    default: () => \"rtl\",\r\n  },\r\n});\r\nconst emits = defineEmits<{\r\n  (e: \"update:value\"): void;\r\n}>();\r\nconst modelValue = useVModel(props, \"modelValue\", emits);\r\n</script>\r\n<style lang=\"scss\" scoped></style>\r\n","<script lang=\"ts\">\nimport { defineComponent } from 'vue'\nexport default defineComponent({\n  name: 'DiyInput',\n})\n</script>\n<template>\r\n  <div class=\"diy-input\">\r\n    <el-input v-model=\"props.value\"></el-input>\r\n  </div>\r\n</template>\r\n<script name=\"DiyInput\" setup lang=\"ts\">\r\n// import { useVModel } from \"@vueuse/core\";\r\nimport { DiyInputType } from \"@/types/components\";\r\nimport { PropType } from \"vue\";\r\nconst props = defineProps({\r\n  value: {\r\n    type: [String, Number],\r\n  },\r\n  compCfg: {\r\n    type: Object as PropType<DiyInputType>,\r\n  },\r\n});\r\n// const emits = defineEmits<(e: \"update:value\") => void>();\r\n// const modelValue = useVModel(props, \"value\", emits);\r\n</script>\r\n<style lang=\"scss\" scoped></style>\r\n","<template>\r\n  <div class=\"diy-select\">全局注册</div>\r\n</template>\r\n<script name=\"DiySelect\" setup lang=\"ts\"></script>\r\n<style lang=\"scss\" scoped></style>\r\n","<script lang=\"ts\">\nimport { defineComponent } from 'vue'\nexport default defineComponent({\n  name: 'ExSubMenu',\n})\n</script>\n<template>\r\n  <div class=\"ex-sub-menu\">\r\n    <el-sub-menu :index=\"data.index\">\r\n      <template #title>{{ data.title }}</template>\r\n      <template v-for=\"item in data.children\" :key=\"item.index + item.title\">\r\n        <ExSubMenu\r\n          v-if=\"\r\n            item.children &&\r\n            Array.isArray(item.children) &&\r\n            item.children.length != 0\r\n          \"\r\n          :data=\"item\"\r\n        >\r\n        </ExSubMenu>\r\n        <el-menu-item v-else :index=\"item.index\">{{ item.title }}</el-menu-item>\r\n      </template>\r\n    </el-sub-menu>\r\n  </div>\r\n</template>\r\n<script name=\"ExSubMenu\" setup lang=\"ts\">\r\nimport { PropType } from \"vue\";\r\nimport type { ExMenuItemType } from \"@/types/store\";\r\ndefineProps({\r\n  data: {\r\n    type: Object as PropType<ExMenuItemType>,\r\n    default: () => ({}),\r\n  },\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\" scoped></style>\r\n","<script lang=\"ts\">\nimport { defineComponent } from 'vue'\nexport default defineComponent({\n  name: 'ExMenu',\n})\n</script>\n<template>\r\n  <div class=\"ex-menu\">\r\n    <el-menu\r\n      :default-openeds=\"defaultOpeneds\"\r\n      :default-active=\"defaultActive\"\r\n      :collapse=\"collapse\"\r\n      :mode=\"mode\"\r\n      :unique-opened=\"true\"\r\n      @select=\"selectFn\"\r\n      @open=\"openFn\"\r\n      @close=\"closeFn\"\r\n    >\r\n      <template v-for=\"item in data\" :key=\"item.index + item.title\">\r\n        <ExSubMenu\r\n          v-if=\"item.children && item.children.length != 0\"\r\n          :data=\"item\"\r\n        >\r\n        </ExSubMenu>\r\n        <el-menu-item v-else :index=\"item.index\">{{ item.title }}</el-menu-item>\r\n      </template>\r\n    </el-menu>\r\n  </div>\r\n</template>\r\n<script name=\"ExMenu\" setup lang=\"ts\">\r\nimport { PropType } from \"vue\";\r\nimport ExSubMenu from \"./components/ExSubMenu.vue\";\r\nimport type { ExMenuItemType } from \"@/types/store\";\r\ndefineProps({\r\n  data: {\r\n    type: Array as PropType<ExMenuItemType[]>,\r\n    required: true,\r\n    default: () => [],\r\n  },\r\n  defaultActive: {\r\n    type: String,\r\n    default: \"\",\r\n  },\r\n  defaultOpeneds: {\r\n    type: Array as PropType<string[]>,\r\n    default: () => [] as string[],\r\n  },\r\n  mode: {\r\n    type: String as PropType<\"horizontal\" | \"vertical\">,\r\n  },\r\n  collapse: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n});\r\nconst emit = defineEmits<{\r\n  (e: \"select\", index: string, indexPaths: string[]): void;\r\n  (e: \"open\", index: string, indexPaths: string[]): void;\r\n  (e: \"close\", index: string, indexPaths: string[]): void;\r\n}>();\r\n/**\r\n * 选择函数\r\n *\r\n * @param index 当前选中的索引值\r\n * @param indexPaths 索引路径数组\r\n * @returns 无返回值\r\n */\r\nconst selectFn = (index: string, indexPaths: string[]) => {\r\n  emit(\"select\", index, indexPaths);\r\n};\r\nconst openFn = (index: string, indexPaths: string[]) => {\r\n  emit(\"open\", index, indexPaths);\r\n};\r\nconst closeFn = (index: string, indexPaths: string[]) => {\r\n  emit(\"close\", index, indexPaths);\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.ex-menu {\r\n  overflow-y: auto;\r\n  user-select: none;\r\n  .el-menu {\r\n    height: 100%;\r\n  }\r\n}\r\n</style>\r\n","// {\r\n//   \"dyn_id\": \"981118307352444930\",\r\n//   \"dyn_type\": 8\r\n\r\n// },\r\nconst data = [\r\n  {\r\n    dyn_id: \"981118307352444930\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"981099233446723617\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"980962374298107942\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"980962370015723573\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"980948226680029184\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"980731777499791478\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"980699552380092432\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"980686658843181057\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"980685542413828200\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"980680190643404882\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"980591551144001541\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"980591289127927816\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"980591284853932066\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"980220203962990627\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"980220199672217632\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"979478033604804662\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"979478033601658897\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"979463916016893989\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"979448505697304598\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"979268666852900901\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"979264853131657234\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"979255137683898408\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"979235638539714577\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"979200784894787617\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"979193328822124665\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"979106952691843081\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"979106948400021509\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"979100523169841158\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"978830094859501573\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"978814504087322675\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"978737323772477506\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"978735863223549991\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"978735858985205816\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"978721711350349860\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"978458893704232965\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"978364778091118614\",\r\n    dyn_type: 8,\r\n  },\r\n  {\r\n    dyn_id: \"978364773766791203\",\r\n    dyn_type: 8,\r\n  },\r\n];\r\ntype queryType = {\r\n  [key in string]: any;\r\n};\r\nexport declare interface TableConfig {\r\n  showIndex: boolean;\r\n  showSelection: boolean;\r\n  currentPage: number;\r\n  pageSize: number;\r\n  height?: number;\r\n  api: string;\r\n  loading: boolean;\r\n  showOverflowTooltip: boolean;\r\n  colSlots: string[];\r\n  columns: { prop: string; label: string }[];\r\n  query: queryType;\r\n  tableData: any[];\r\n  total: number;\r\n  background: boolean;\r\n  pageSizes: number[];\r\n  layout: string;\r\n}\r\nexport const tableConfig: TableConfig = {\r\n  // 表格配置\r\n  query: {},\r\n  tableData: data,\r\n  showIndex: true,\r\n  showSelection: true,\r\n  currentPage: 1,\r\n  pageSize: 10,\r\n  height: 200,\r\n  api: \"\",\r\n  loading: false,\r\n  showOverflowTooltip: true,\r\n  colSlots: [\"dyn_id\"],\r\n  columns: [\r\n    { prop: \"dyn_id\", label: \"a表头\" },\r\n    { prop: \"dyn_type\", label: \"b表头\" },\r\n  ],\r\n  // 分页配置\r\n  total: 1000,\r\n  background: true,\r\n  pageSizes: [10, 20, 30, 40, 50, 100],\r\n  layout: \"total,prev, pager, next,layout,sizes\",\r\n};\r\nexport const setTableConfig = (cfg?: object) => {\r\n  return {\r\n    ...tableConfig,\r\n    ...cfg,\r\n  };\r\n};\r\nexport const getTableConfig = () => {\r\n  return {\r\n    ...tableConfig,\r\n  };\r\n};\r\n","<script lang=\"ts\">\nimport { defineComponent } from 'vue'\nexport default defineComponent({\n  name: 'ExTable',\n})\n</script>\n<template>\r\n  <div class=\"ex-table\" v-loading=\"model.loading\">\r\n    <!-- 搜索 -->\r\n    <div class=\"search-comps\">\r\n      <el-input v-model=\"model.query.form\"></el-input>\r\n    </div>\r\n    <div class=\"search-btn\">\r\n      <el-button type=\"primary\" @click=\"searchFn\">搜索</el-button>\r\n    </div>\r\n    <!-- 表格 -->\r\n    <div\r\n      class=\"table-container\"\r\n      ref=\"tableContainer\"\r\n      v-size-ob=\"tableSizeChange\"\r\n    >\r\n      <el-table :data=\"model.tableData\" ref=\"table\" :height=\"model.height\">\r\n        <!-- 表格选择列 -->\r\n        <el-table-column type=\"selection\"></el-table-column>\r\n        <!-- 表格序列 -->\r\n        <el-table-column\r\n          type=\"index\"\r\n          label=\"序号\"\r\n          width=\"60\"\r\n          :index=\"indexMethod\"\r\n        >\r\n        </el-table-column>\r\n        <!-- 表格内容列 -->\r\n        <el-table-column\r\n          v-for=\"(item, index) in model.columns\"\r\n          :key=\"index\"\r\n          :prop=\"item.prop\"\r\n          :label=\"item.label\"\r\n          :show-overflow-tooltip=\"model.showOverflowTooltip\"\r\n        >\r\n          <template #default=\"{ row }\">\r\n            <!-- 表格内容单元格插槽 -->\r\n            <slot\r\n              v-if=\"model.colSlots.includes(item.prop)\"\r\n              :name=\"item.prop\"\r\n              :row=\"row\"\r\n            ></slot>\r\n            <!-- 内容单元格默认显示字段 -->\r\n            <div v-else>{{ row[item.prop] }}</div>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </div>\r\n    <!-- 分页 -->\r\n    <div class=\"pagination-container\">\r\n      <el-pagination\r\n        ref=\"pagination\"\r\n        :total=\"model.total\"\r\n        :background=\"model.background\"\r\n        :layout=\"model.layout\"\r\n        :current-page=\"model.currentPage\"\r\n        v-model:page-size=\"model.pageSize\"\r\n        @update:current-page=\"currentPageChange\"\r\n        @update:page-size=\"pageSizeChange\"\r\n        :page-sizes=\"model.pageSizes\"\r\n      ></el-pagination>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script name=\"ExTable\" setup lang=\"ts\">\r\nimport { onMounted, PropType, useTemplateRef } from \"vue\";\r\n// import { getData } from \"@/axios/test\";\r\nimport { tableConfig, setTableConfig } from \"./tableConfig\";\r\nimport { useVModel } from \"@vueuse/core\";\r\nconst table = useTemplateRef(\"table\");\r\nconst pagination = useTemplateRef(\"pagination\");\r\ndefineExpose({\r\n  table,\r\n  pagination,\r\n});\r\n\r\nconst emits = defineEmits([\"update:modelValue\"]);\r\nconst props = defineProps({\r\n  modelValue: {\r\n    type: Object as PropType<typeof tableConfig>,\r\n    default: () => setTableConfig(),\r\n  },\r\n});\r\nconst model = useVModel(props, \"modelValue\", emits);\r\n\r\nonMounted(() => {});\r\nconst tableSizeChange = (rect: { width: number; height: number }) => {\r\n  model.value.height = rect.height;\r\n};\r\nconst searchFn = () => {\r\n  getTableData(1);\r\n};\r\nconst getTableData = async (currentPage?: number, pageSize?: number) => {\r\n  console.log(`output->获取表格数据`);\r\n  if (model.value.loading) return;\r\n  model.value.loading = true;\r\n  model.value.currentPage = currentPage || model.value.currentPage;\r\n  model.value.pageSize = pageSize || model.value.pageSize;\r\n  try {\r\n    // await getData({ a: 1 });\r\n  } catch (error) {\r\n    console.log(\"请求表格数据失败\", error);\r\n  } finally {\r\n    model.value.loading = false;\r\n  }\r\n};\r\nconst currentPageChange = (value: number) => {\r\n  getTableData(value);\r\n};\r\nconst pageSizeChange = (value: number) => {\r\n  getTableData(1, value);\r\n};\r\nconst indexMethod = (index: number) => {\r\n  return index + 1 + (model.value.currentPage - 1) * model.value.pageSize;\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.ex-table {\r\n  height: 100%;\r\n  display: grid;\r\n  grid-template-areas:\r\n    \"search-comps search-btn\"\r\n    \"table-container table-container\"\r\n    \"pagination-container pagination-container\";\r\n  grid-template-columns: 10fr 1fr;\r\n  grid-template-rows: auto 1fr auto;\r\n  gap: 10px;\r\n  .search-container {\r\n    grid-area: search-container;\r\n  }\r\n  .table-container {\r\n    grid-area: table-container;\r\n    overflow: auto;\r\n  }\r\n  .pagination-container {\r\n    grid-area: pagination-container;\r\n    .el-pagination {\r\n      justify-content: end;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import { App } from \"vue\";\r\n// 注册全局组件\r\nexport function setGlobalComponents(app: App<Element>) {\r\n  // 默认只注册src/components文件夹下第二层级中的所有组件组件，第一层级和更深层级的组件不在注册\r\n  const comps: Record<string, object> = import.meta.glob(\"./**/**/*.vue\", {\r\n    import: \"default\",\r\n    eager: true,\r\n  });\r\n  Object.keys(comps).map((key) => {\r\n    const paths = key.split(\"/\");\r\n    // 判断组件是否在components文件夹中，是就不注册该组件\r\n    const has = paths.find((item) => item === \"components\");\r\n    if (has) return;\r\n\r\n    // console.log(\"compPath\", paths);\r\n    let compName = \"\";\r\n    let len = paths.length;\r\n    // 如果是index.vue文件，则取倒数第二个文件夹名为组件名，否则直接取文件名作为组件名\r\n    if (paths[len - 1] === \"index.vue\") {\r\n      compName = paths[len - 2];\r\n    } else {\r\n      compName = paths[len - 1].split(\".\")[0];\r\n    }\r\n    // console.log(\"compName\", compName);\r\n    app.component(compName, comps[key]);\r\n  });\r\n}\r\n"],"names":["showDayNum","getMonthInfo","date","num","moment","start","days","firstDayOfMonth","getCalendarData","time","preMonth","curMonth","nextMonth","calendarData","i","dayInfo","resetDayInfo","__default__","defineComponent","slots","useSlots","props","__props","emits","__emit","modelValue","useVModel","weeks","selected","reactive","setCalendarItemClass","item","isBanFn","isSelectedFn","toTreeCalendarData","data","tempData","tempItem","index","changeModelValue","value","type","formateDate","end","isHaving","selectDayFn","_sfc_render","_ctx","_cache","_openBlock","_createElementBlock","_hoisted_1","_useSlots","vw","vh","useViewPort","containerRef","ref","x","y","showMenu","useContextMenu","emit","w","h","handleSizeChange","rect","width","height","pos","computed","posX","posY","handleMenuItem","handleBeforeEnter","el","handleEnter","handleAfterEnter","modelShow","eventRes","hasEvent","isHidden","beforeFn","hidden","closeFn","selectFn","_a","mouseX","mouseY","openContextMenu","e","targetRef","onMounted","onBeforeUnmount","autoId","AutoId","allCtrls","getInitCompData","compName","getContainerCfg","getInputCfg","getSelectCfg","getDiyDatePickerCfg","id","ctrlIdError","getFormItemCfg","str","list","ctrlsRef","useDraggable","ctrl","contextList","selectContext","conCfg","diyContainer","formCfg","ctrls","cfg","modelVisiable","beforeCloseFn","doneFn","indexPaths","openFn","tableConfig","setTableConfig","getTableConfig","table","useTemplateRef","pagination","__expose","model","tableSizeChange","searchFn","getTableData","currentPage","pageSize","error","currentPageChange","pageSizeChange","indexMethod","setGlobalComponents","app","comps","__vite_glob_0_0","__vite_glob_0_1","__vite_glob_0_2","__vite_glob_0_3","__vite_glob_0_4","__vite_glob_0_5","__vite_glob_0_6","__vite_glob_0_7","__vite_glob_0_8","__vite_glob_0_9","__vite_glob_0_10","__vite_glob_0_11","__vite_glob_0_12","__vite_glob_0_13","__vite_glob_0_14","__vite_glob_0_15","__vite_glob_0_16","__vite_glob_0_17","__vite_glob_0_18","__vite_glob_0_19","key","paths","len"],"mappings":"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"}