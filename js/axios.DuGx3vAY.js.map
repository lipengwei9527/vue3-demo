{"version":3,"file":"axios.DuGx3vAY.js","sources":["../../src/axios/index.ts","../../src/axios/file.ts"],"sourcesContent":["import axios from \"axios\";\r\nconst xhr = axios.create({\r\n  timeout: 1000 * 10,\r\n});\r\nxhr.interceptors.request.use(\r\n  (config) => {\r\n    console.log(`output->config`, config);\r\n    return config;\r\n  },\r\n  (error) => {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\nxhr.interceptors.response.use(\r\n  (response) => {\r\n    return Promise.resolve(response);\r\n  },\r\n  (error) => {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\nexport default xhr;\r\n","import xhr from \"@/axios\";\r\nimport { fileToFormData, fileToBase64, fileToBinary } from \"@/utils/file\";\r\nconst prefix = import.meta.env.VITE_API_EXPRESS;\r\n// 单文件上传\r\nexport const uploadFormData = async (file: File) => {\r\n  const formData = await fileToFormData(file);\r\n  return xhr.post(`${prefix}/file`, formData, {\r\n    headers: {\r\n      \"Content-Type\": \"multipart/form-data\",\r\n    },\r\n  });\r\n};\r\n// base64上传\r\nexport const uploadBase64 = async (file: File) => {\r\n  const base64Data = await fileToBase64(file);\r\n  if (base64Data.state != \"success\") return new Error(\"文件格式不支持\");\r\n  return xhr.post(`${prefix}/file/base64`, {\r\n    ext: base64Data.ext,\r\n    file: base64Data.base64,\r\n  });\r\n};\r\n// base64上传\r\nexport const uploadBinary = async (file: File) => {\r\n  const binaryData = await fileToBinary(file);\r\n  if (binaryData.state != \"success\") return new Error(\"文件格式不支持\");\r\n  return xhr.post(`${prefix}/file/binary`, binaryData.binary, {\r\n    headers: {\r\n      \"Content-Type\": \"application/octet-stream\",\r\n      \"x-ext\": file.name.split(\".\").pop(),\r\n    },\r\n  });\r\n};\r\n"],"names":["xhr","axios","config","error","response","prefix","uploadFormData","file","formData","fileToFormData","uploadBase64","base64Data","fileToBase64","uploadBinary","binaryData","fileToBinary"],"mappings":"qGACA,MAAMA,EAAMC,EAAM,OAAO,CACvB,QAAS,IAAO,EAClB,CAAC,EACDD,EAAI,aAAa,QAAQ,IACtBE,IACS,QAAA,IAAI,iBAAkBA,CAAM,EAC7BA,GAERC,GACQ,QAAQ,OAAOA,CAAK,CAE/B,EACAH,EAAI,aAAa,SAAS,IACvBI,GACQ,QAAQ,QAAQA,CAAQ,EAEhCD,GACQ,QAAQ,OAAOA,CAAK,CAE/B,EClBA,MAAME,EAAS,OAEFC,EAAiB,MAAOC,GAAe,CAC5C,MAAAC,EAAW,MAAMC,EAAeF,CAAI,EAC1C,OAAOP,EAAI,KAAK,GAAGK,CAAM,QAASG,EAAU,CAC1C,QAAS,CACP,eAAgB,qBAClB,CAAA,CACD,CACH,EAEaE,EAAe,MAAOH,GAAe,CAC1C,MAAAI,EAAa,MAAMC,EAAaL,CAAI,EAC1C,OAAII,EAAW,OAAS,UAAkB,IAAI,MAAM,SAAS,EACtDX,EAAI,KAAK,GAAGK,CAAM,eAAgB,CACvC,IAAKM,EAAW,IAChB,KAAMA,EAAW,MAAA,CAClB,CACH,EAEaE,EAAe,MAAON,GAAe,CAC1C,MAAAO,EAAa,MAAMC,EAAaR,CAAI,EAC1C,OAAIO,EAAW,OAAS,UAAkB,IAAI,MAAM,SAAS,EACtDd,EAAI,KAAK,GAAGK,CAAM,eAAgBS,EAAW,OAAQ,CAC1D,QAAS,CACP,eAAgB,2BAChB,QAASP,EAAK,KAAK,MAAM,GAAG,EAAE,IAAI,CACpC,CAAA,CACD,CACH"}